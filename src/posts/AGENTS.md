# 게시글 작성 지침

아래 가이드만 따르면 `src/posts`에 새 글을 추가하고 배포까지 문제없이 진행할 수 있어요.

---

## 1) 폴더/파일 구조
- **위치**: `src/posts/{year}/{id}.mdx`
- **제한**: 연도 폴더 바로 아래 1단계까지만 인식해요. 그보다 깊은 서브폴더는 무시돼요.
- **확장자**: `.mdx`만 게시글로 처리돼요.

예)
- `src/posts/2025/0929.mdx`
- `src/posts/2025/personal-market-fit.mdx`

## 2) 파일명(id) 컨벤션
- **권장**: 소문자 `kebab-case` 또는 짧은 날짜형(`MMDD`) 식별자
- **허용 문자**: 알파벳 소문자, 숫자, 하이픈(`-`)만 사용 권장
- **중복 규칙**: 같은 연도(`{year}`) 내에서만 유일하면 돼요. (라우트는 `/{year}/{id}`)

## 3) 프론트매터(필수/선택)
아래 스키마를 그대로 사용하세요. 모든 필드는 문자열이며, 날짜는 ISO8601로 작성합니다.

```mdx
---
title: 게시글 제목 (필수)
description: 검색/공유용 요약 (필수, 80~160자 권장)
date: '2025-09-29T00:00:00.000Z' # 필수, ISO8601(UTC, 끝에 Z)
openGraph:                       # 선택, 첫 번째 이미지만 사용됨
  images: ['/og/{id}']           # public 기준 절대경로, 배열 형태 유지
---

여기부터 본문을 작성합니다. MDX 문법과 GFM(표, 체크리스트 등)을 사용할 수 있어요.
```

- **title**: H1과 메타 타이틀에 사용
- **description**: 메타 설명 및 OG 설명에 사용 (간결하고 자연스러운 한글)
- **date**: 정렬과 공개일로 사용됩니다. 반드시 `'YYYY-MM-DDTHH:mm:ss.SSSZ'` 형태로 작성
- **openGraph.images**: 배열의 첫 요소만 사용합니다. 없으면 기본 OG 이미지가 적용돼요.

## 4) 본문 작성 규칙(MDX)
- **지원**: 기본 MDX, GFM(테이블, 체크박스, 자동 링크 등)
- **코드블록**: 일반 코드펜스(````) 사용. 언어 태그 지정 권장
- **헤딩**: 문서 내 유일한 H1은 자동 렌더링되므로 본문에서는 H2(`##`)부터 사용 권장
- **내부 링크**: 절대경로(`/2025/{id}`) 또는 상대경로 모두 가능
- **이미지**: `public` 기준 절대경로(`/images/...`) 사용 권장

## 5) OG 이미지 가이드
- **위치**: `public/og/{id}.{png|jpg}` (권장)
- **크기**: 1200×630(px) 권장, 용량은 300KB 내외로 최적화
- **경로 지정**: 프론트매터 `openGraph.images: ['/og/{id}']` 형태로 등록 (확장자는 생략 가능)
- **여러 장**: 배열로 여러 개 넣을 수 있지만, 실제로는 첫 번째 이미지만 사용돼요.

## 6) 새 글 추가 절차(체크리스트)
1. 파일 생성: `src/posts/{year}/{id}.mdx`
2. 프론트매터 채우기: 위 스키마 그대로 복사 → 값만 수정
3. 본문 작성: MDX/GFM 사용, H2부터 시작 권장
4. 로컬 확인:
   - 개발 서버 실행: `pnpm run dev`
   - 브라우저에서 `http://localhost:3000/{year}/{id}` 확인
5. 메타 확인:
   - 제목/설명/OG 이미지가 의도대로 노출되는지 확인
6. 빌드 테스트: `pnpm run build`
7. 커밋: `post - {제목}` 형식 권장 (예: `post - 중학생의 수첩`)

## 7) 자주 하는 실수와 해결
- 날짜 포맷 오류 → 반드시 ISO8601 + `Z`(UTC)로 작성: `'2025-09-29T00:00:00.000Z'`
- 오경로 OG 이미지 → `public/og`에 파일을 두고, 프론트매터는 `/og/{id}`로 지정
- 잘못된 폴더 깊이 → `src/posts/{year}/{id}.mdx`만 인식 (추가 하위 폴더 불가)
- 확장자 누락 → `.mdx`만 게시글로 처리

## 8) 라우팅/정렬 동작 요약(참고)
- 라우트: `/{year}/{id}`
- 정렬: `date` 내림차순(최신 글이 상단)
- OG 이미지: `openGraph.images[0]`만 사용, 없으면 기본 이미지로 대체

## 9) 빠른 시작 템플릿
아래 템플릿을 그대로 붙여 넣고 값만 바꾸세요.

```mdx
---
title: 글 제목
description: 짧고 명확한 요약문을 작성하세요 (80~160자 권장)
date: '2025-09-29T00:00:00.000Z'
openGraph:
  images: ['/og/{id}']
---

## 섹션 제목

본문을 작성합니다.
```

## 10) Notion에서 게시글 가져오기
Notion에 작성해 둔 초안이 있다면 자동으로 가져와서 MDX 파일로 변환할 수 있어요.

### 조회 방법
Notion 페이지를 가져오는 방법은 두 가지가 있어요:

#### 방법 1: 제목으로 검색 (추천: 제목만 알고 있을 때)
- 제목으로 검색 후 해당 페이지 내용을 가져옴
- 같은 제목의 페이지가 여러 개 있을 경우 최신 순으로 검색됨

#### 방법 2: 링크로 직접 조회 (추천: 정확한 페이지를 알고 있을 때)
- Notion에서 "링크 복사"한 URL을 그대로 사용
- 쿼리 파라미터(`?source=copy_link` 등)가 있어도 상관없음
- 검색 단계를 건너뛰고 바로 해당 페이지를 가져올 수 있어 더 빠르고 정확함

### 워크플로우
1. **초안 파일 생성**: `src/posts/{year}/{id}.mdx` 템플릿 파일 생성
2. **Notion 조회**: 
   - 제목으로 검색하거나
   - Notion 링크를 직접 사용
3. **내용 가져오기**: Notion 페이지 전체 내용을 fetch
4. **MDX 변환**: 
   - Notion의 텍스트 내용을 MDX 본문으로 변환
   - 첫 문단이나 핵심 문장을 `description`으로 활용
   - 제목은 Notion 페이지 제목 활용 (또는 내용 기반으로 수정)
5. **검토 및 조정**:
   - 제목이 내용과 잘 맞는지 확인
   - description이 80~160자 범위인지 확인
   - 필요시 더 나은 제목 제안 받기
6. **커밋**: `post - {최종 제목}` 형식으로 커밋

### 주의사항
- Notion의 서식은 자동 변환되지 않으므로 MDX 문법에 맞게 수동 조정 필요
- Notion의 이미지는 별도로 다운로드해서 `public/` 경로에 배치
- 날짜는 작성일에 맞게 ISO8601 형식으로 수정
- 헤딩 레벨 확인 (본문은 H2부터 시작)

### 예시

Notion 링크만 제공하면 오늘 날짜 기준으로 자동 생성됩니다:

```bash
# 한 줄로 끝내기
"이 노션 문서를 블로그 글로 만들어줘:
https://www.notion.so/27db9f0a692e80c29355daf6a57c7891"

# 또는 더 간단하게
"@https://www.notion.so/27db9f0a692e80c29355daf6a57c7891 이 문서를 블로그 글로 변환해줘"
```

에이전트가 자동으로:
1. 오늘 날짜(예: 2025년 10월 7일 → `1007.mdx`)로 파일 생성
2. Notion 페이지 내용 가져오기
3. MDX 형식으로 변환 (제목, description, 본문)
4. 더 나은 제목이 있다면 제안
5. 커밋까지 완료

