<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>[개발] 최적화의 늪</title>
  <meta name="description" content="지난 석달간 열심히 개발을 했습니다. 그리고 지난 11월 27일에 앱스토어에 승인 심사를 올렸습니다. 심사는 2주정도 걸립니다. 기다림의 시간이 시작된 것 입니다. 승인 심사 결과를 기다릴 때까지 회사의 다른 일을 돕게 될 줄 알았습니다. 착각이었습니다.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="canonical" href="http://rabbylab.xyz/blog/%ea%b0%9c%eb%b0%9c-%ec%b5%9c%ec%a0%81%ed%99%94%ec%9d%98-%eb%8a%aa/">
  <link rel="alternate" type="application/rss+xml" title="RABBYLAB" href="http://rabbylab.xyz/blog/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">RABBYLAB</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">[개발] 최적화의 늪</h1>
    <p class="post-meta"><time datetime="2015-12-10T07:04:00+09:00" itemprop="datePublished">Dec 10, 2015</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">rabby</span></span></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>지난 석달간 열심히 개발을 했습니다. 그리고 지난 11월 27일에 앱스토어에 승인 심사를 올렸습니다. 심사는 2주정도 걸립니다. 기다림의 시간이 시작된 것 입니다. 승인 심사 결과를 기다릴 때까지 회사의 다른 일을 돕게 될 줄 알았습니다. 착각이었습니다.</p>

<p>최적화가 남아 있었습니다. 저희 앱은 하이브리드로 개발되어 iOS용 앱과 안드로이드용 앱을 하나의 코드로 빌드가 가능합니다. 허나 저희가 사용하는 프레임워크인 ionic은 iOS에 조금 더 최적화 되어있습니다. 때문에 안드로이드에서 사용하기에는 최적화가 필수 입니다. 아이폰에서는 제법 쓸만한 녀석이 갤럭시에서 쓰면 정말 못참아 줄정도로 느려서 사용할 수가 없을 지경입니다. 지난주에 몇가지 레이아웃 수정 문제를 해결하고 이번주에 들어서 최적화를 시작했습니다. 최적화는 정말 늪입니다. 정말 어디가 문제인지 찾는 것부터가 너무 어렵습니다. 애당초 앱을 설계할 때부터 고려했어야했는데 처음 사용해보는 프레임워크라 배우기도 바빠 제대로 설계할 겨를이 없었던게 화근입니다.</p>

<p>이틀간 거듭된 삽질 끝에 몇가지 원인을 발견했습니다. 주요한 원인은 두가지 입니다. 모두 기본적으로 AngularJS가 가지는 장점인 Two-way Binding(양방향 바인딩)으로 인해 발생하는 문제입니다.</p>

<ol>
  <li><em>ng-repeat과 binding이 만났을 때 발생하는 문제</em></li>
  <li><em>$apply(), $watch(), $digest()등이 지나치게 과하게 호출되서 발생하는 문제</em></li>
</ol>

<div>
  ng-repeat으로 인한 문제는 저희 앱처럼 텍스트 입력이 많고 이를 바인딩으로 해결하려는 앱에서 고질적으로 발생하는 문제인 것 같습니다. 구글링해보면 많은 이들이 유사한 문제로 어려움을 겪고 있었습니다. 두번째 문제는 조금 더 일반적인 문제입니다. AngularJS를 잘 사용하려면 기본적으로 해결해야하는 문제인데 저희는 처음이라 몰랐던 것이죠. 이 두 문제는 바인딩을 한번만 해주는 것(one-time binding)으로 변경하면 일부 해결할 수 있었습니다. 기존에 으로 바인딩 해주는 것을 이라고 수정해주면 초기에 한번만 값을 읽어옵니다. 이후에 데이터가 변경되어도 읽어오지 않기 때문에 불가변적인 데이터에 적용하면 최적화의 효과를 볼 수 있습니다. 그리고 $apply(), $watch(), $digest() 삼형제가 호출되는 문제는 따로 최적화 시키는 방법이 존재하는데 아직 그까지 적용하지 못했습니다. 내일 변경해볼 생각입니다.
</div>

<div>
</div>

<div>
  위의 두가지 문제뿐만 아니라 정말 다양한 문제로 씨름하고 있습니다. ng-if 때문에 발생하는 속도저하 문제도 있었죠. 이는 ng-show로 변경하면 그나마 괜찮아집니다. ng-repeat에 track by를 추가해주는 것으로도 속도 향상에 도움을 얻을 수 있었습니다. 아직 언급하지 않은 그리고 발견하지 못한 문제도 많습니다.
</div>

<div>
</div>

<div>
  최적화&#8230;정말 늪입니다. 참 지루하고 힘든 시간입니다. 스스로 작성한 코드를 몇번이고 반복해서 보는 일은 참 힘든 것 같습니다. 그래도 인내하고 견디면 더 좋은 앱이 나오겠죠? 
</div>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">RABBYLAB</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <p>Coding Experience</p>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="contact-list">
          <li><a href="mailto:imjoeunha@gmail.com"><span class="fa fa-envelope"></span> Email</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/joeunha"><span class="fa fa-github"></span> GitHub</a>

          </li>
          

          
          <li>
            <a href="https://kr.linkedin.com/in/joeunha"><span class="fa fa-linkedin"></span> LinkedIn</a>

          </li>
          
        </ul>
      </div>
    </div>

  </div>

</footer>

  </body>

</html>
