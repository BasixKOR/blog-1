<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>joeun.me</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="description" content="Developer Joeun&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="joeun.me">
<meta property="og:url" content="https://joeun.me/index.html">
<meta property="og:site_name" content="joeun.me">
<meta property="og:description" content="Developer Joeun&apos;s Blog">
<meta property="og:locale" content="ko">
<meta property="og:image" content="https://joeun.me/images/header_image.gif">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="joeun.me">
<meta name="twitter:description" content="Developer Joeun&apos;s Blog">
<meta name="twitter:image" content="https://joeun.me/images/header_image.gif">
  
  
    <link rel="shortcut icon" href="/css/images/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-92829973-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <link rel="canonical" href="https://joeun.me/"/>
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <a href="/">
       
        <img src="/images/logo.png">
       
      </a>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/about">소개</a>
        
          <a class="main-nav-link" href="/">블로그</a>
        
          <a class="main-nav-link" href="/archives">모아보기</a>
        
          <a class="main-nav-link" href="https://github.com/joeunha">Github</a>
        
      </nav>
      <nav id="sub-nav">
        
        <!--<a id="nav-search-btn" class="nav-icon" title="Search"></a>-->
      </nav>
      <!--<div id="search-form-wrap">-->
        <!--<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://joeun.me"></form>-->
      <!--</div>-->
    </div>
  </div>
</header>
      <div id="body" class="outer">
        <section id="main">
  
    <article id="post-landsurfer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/landsurfing/landsurfer/" class="article-date">
  <time datetime="2017-11-20T13:45:38.000Z" itemprop="datePublished">2017-11-20</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/landsurfing/">landsurfing</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/landsurfing/landsurfer/">[Landsurfing] 취미의 시작</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="랜드서핑을-만나다"><a href="#랜드서핑을-만나다" class="headerlink" title="랜드서핑을 만나다"></a>랜드서핑을 만나다</h2><p>2013년 7월, 미니 크루저보드가 크게 유행했습니다. 셀럽이 공항에서 타고 등장했었죠. 페니(Penny)라는 회사에서 나오는 보드가 가장 유명했습니다. ‘크루저보드 = 페니보드’로 인식되던 시절입니다. 학교에서 보드를 타고 돌아다니는 친구들을 보니 멋져보였습니다. 취미를 가져보기로 했습니다. 정가로 사면 17만원정도 했던 기억이 납니다. 친구의 도움으로 중고나라에서 로고 없는 페니보드를 5만원에 싸게 구했습니다. 1년정도 타다가 중고로 팔았습니다.</p>
<p>2017년 4월, 대학 동문인 형님의 소개로 랜드서핑보드라는 것을 알게되었습니다. 여기서는 카버(Carver)라는 회사의 보드가 가장 유명합니다. ‘랜드서핑보드 = 카버보드’로 알려지고 있습니다. 정가로 알아보니 30만원이 훌쩍 넘습니다. 하지만 여기서는 대안이 없습니다. 인터넷 최저가를 뒤져 31만원에 보드를 하나 장만했습니다. 4월 29일입니다.</p>
<p>2017년 11월, 보드를 탄지 제법 시간이 흘렀습니다. 그동안 피드백을 위해 영상을 찍어 기록을 남겼습니다. 그리고 오늘 블로그에 기록을 시작합니다.</p>
<h2 id="영상으로-피드백을-공유로-즐거움을"><a href="#영상으로-피드백을-공유로-즐거움을" class="headerlink" title="영상으로 피드백을, 공유로 즐거움을"></a>영상으로 피드백을, 공유로 즐거움을</h2><p>처음 보드를 타면 자세가 어정쩡합니다. 춤을 추는 것과 비슷하다고 할까요. 자기가 생각한 것과 몸이 움직이는 모양이 많이 다릅니다. 춤은 전신 거울을 보며 즉시로 교정해나갈 수 있지만 보드는 거울을 보기 어렵습니다. 그래서 영상을 남깁니다. 처음에는 아이폰(iPhone SE)을 사용했습니다. 삼각대도 없었습니다. 그나마 각진 제 아이폰이 설 수 있는 곳을 찾아서 겨우 영상을 담아갔습니다. 그정도로 충분했습니다. </p>
<p>조금씩 자세가 좋아지는가 싶더니 영상을 더 다양한 각도로 담고 싶어졌습니다. 삼각대를 구매했습니다. 샤오미(Xiaomi)에서 나온 셀카봉 겸 삼각대를 구매했습니다. 덕분에 더 다양한 각도로 영상을 찍을 수 있게 되었습니다. 다양한 영상이 나오니 편집이 필요해집니다. 개인적인 피드백만을 위한다면 구태여 편집할 필요가 없지만 늘 영상을 공유하고 있었기에 보기 좋은 영상을 만들고 싶었습니다. iMovie를 사용하기 시작합니다. </p>
<p>영상 전환 방식인 디졸브를 애용하면서 자기 만족을 얻었습니다. 그때 영상쪽 일을 하는 동생에게 피드백을 들었습니다. 디졸브가 없이 편집하는게 사실은 더 근사한 기술이라는 겁니다. 추석때 동생을 만나 편집의 기술을 조금 배웠습니다. 그후로 영상의 퀄리티가 좋아진 것 같습니다. 배경 음악도 넣었습니다. 유튜브에서 만들기라는 옵션에 무료 음원이 있습니다. 대부분 거기서 음원을 얻어오고 있습니다.</p>
<p>그렇게 만들어진 영상은 현재 인스타그램과 유튜브에 공유되고 있습니다. </p>
<h4 id="Instagram"><a href="#Instagram" class="headerlink" title="Instagram"></a>Instagram</h4><p>원래 가지고 있던 계정은 비공개 상태였기에 새로운 계정을 만들었습니다. <a href="https://www.instagram.com/joeun_surf/" target="_blank" rel="external">joeun_surf</a>라는 계정입니다. (개인 계정이 joeun_ha 입니다. 나름대로 작명 규칙을 가지고 있는 샘입니다. 다음 계정은 joeun_something 이겠지요.) ‘카버보드’, ‘랜드서핑’과 같은 태그를 공유하는 이들을 팔로우하고 좋아요를 누르며 활동을 했더니 팔로워가 생깁니다. 글을 작성하는 현재 개인 계정보다 많은 인원인 425명이 joeun_surf를 팔로우하고 있습니다.</p>
<div class="instagram-wrapper"><blockquote class="instagram-media" data-instgrm-captioned="" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px auto; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/BTyyuv_lKOl/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank"></a></p></div></blockquote></div><script async defer src="//platform.instagram.com/en_US/embeds.js"></script>
<p>보드를 탄 첫날 찍어 올린 영상입니다. 신대방 역 아래에 자전거 연습장(자연장)에서 찍었습니다. 하루종일 스윙을 연습해서 앞으로 나갈 수 있었습니다.</p>
<div class="instagram-wrapper"><blockquote class="instagram-media" data-instgrm-captioned="" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px auto; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/BbruxnFl3xP/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank"></a></p></div></blockquote></div><script async defer src="//platform.instagram.com/en_US/embeds.js"></script>
<p>최근에 올린 다운힐 영상입니다. 반포 달빛 광장 진입로에 있는 다운힐 스팟입니다. 겨울에 딱 좋은 스팟입니다. 첫날과 확연히 달라졌죠?</p>
<h4 id="Youtube"><a href="#Youtube" class="headerlink" title="Youtube"></a>Youtube</h4><p>원래 의도는 조금 더 긴 영상(1분 이상)을 업로드하는 것이 목적이었습니다. 하지만 1분 이상의 영상을 만들 정도의 집중력이 현재로선 없다는걸 알게 되었습니다. 인스타에 올린 영상 중에서 조금 정돈된 영상을 유튜브에 담고 있습니다. 페이스북이나 인스타그램에 공유할 수 없는 점 때문에 팔로워를 늘려가는게 쉽지 않습니다. 조회수도 107명이 최대입니다. 그 영상이 아래의 영상입니다. </p>
<div class="video-container"><iframe src="//www.youtube.com/embed/isrTmfZu9dY" frameborder="0" allowfullscreen></iframe></div>
<p>유튜브에 처음 올렸던 영상입니다. 지금의 주행과는 차이가 있습니다. 현재까지 가장 마음에 드는 영상은 상해에서 촬영한 영상입니다. 상해의 주요 랜드마크를 돌면서 영상을 담았습니다. 고프로(GoPro, Hero6)를 사용한 첫번째 영상입니다.</p>
<div class="video-container"><iframe src="//www.youtube.com/embed/MZH_3kNNGg0" frameborder="0" allowfullscreen></iframe></div>
<h4 id="GoPro"><a href="#GoPro" class="headerlink" title="GoPro"></a>GoPro</h4><p>고프로보다는 소니의 액션캠이 낫다고 생각했습니다. 야간 촬영이나 손떨림방지 기능이 훨씬 낫다고 알고 있었습니다. 하지만 면세점의 유혹을 떨쳐버리지 못했습니다. 인기 마운트인 3-Way를 포함해서 원가가 70만원에 가까운 제품을 인터넷 면세점의 쿠폰과 면세 혜택을 통해 48만원에 구매할 수 있는 기회를 저버리기 쉽지 않았습니다. 상해로 떠나는 길에 고프로를 구매했습니다. 덕분에 더 좋은 영상을 많이 담을 수 있었습니다. 기회가 되면 제품에 대한 피드백을 하겠지만 완전 추천하는 제품이라고 말하긴 어렵습니다. 소프트웨어가 불안정합니다. 그럼에도 하드웨어는 훌륭합니다. 좋은 영상을 담아주면 그걸로 제 역할은 다한 것이죠. </p>
<h2 id="함께하는-사람들-Landsurfers"><a href="#함께하는-사람들-Landsurfers" class="headerlink" title="함께하는 사람들, Landsurfers"></a>함께하는 사람들, Landsurfers</h2><p>지난 5월 1일, 네이버 카페 ‘<a href="http://cafe.naver.com/landsurfers" target="_blank" rel="external">랜드서퍼스</a>‘가 오픈했습니다. 그리고 현재 1,133명이 활동하고 있는 ‘가지4단계’의 건실한 카페가 되었습니다. 저를 랜드서핑 세계로 이끌어준 형님이 시작한 카페입니다. 이 분들과 함께 매주 랜드서핑을 즐기고 있습니다. 저는 반포와 분당 정모에 참석합니다. 반포 정모는 랜드서퍼스 메인 정모에 해당하는 정모로 매주 목, 일 저녁에 모입니다. 분당은 월, 목에 모입니다. 평일에는 분당 모임에 가고 일요일은 반포 모임에 참석하고 있습니다. </p>
<p>함께하는 사람들이 있으니 자극이 되고 꾸준히 활동을 이어갈 수 있어 참 좋습니다. 특히나 서로 영상을 찍어주고 피드백을 해주면 실력 향상에 도움이 됩니다. 참 재밌는 점은 랜드서핑이라는 이름으로 모인 이 사람들이 정말 순수하다는 점입니다. 모여서 보드만 타고 헤어집니다. 누가 그렇게 하자고 제안한 바는 아니지만 다들 보드를 즐겁게 타고 싶은 그 마음으로 모였기 때문에 그것으로 충분한 듯합니다. 이들과 함께하는 시간이 점점 더 좋아집니다. </p>
<h2 id="꿈꾸는-랜드서퍼"><a href="#꿈꾸는-랜드서퍼" class="headerlink" title="꿈꾸는 랜드서퍼"></a>꿈꾸는 랜드서퍼</h2><p>‘우아한 라이딩을 꿈꾸는 분당의 랜드서퍼’ 인스타 계정의 소개글 입니다. 처음에는 도무지 우아하게 탈 수가 없어서 우아한 라이딩을 꿈만 꿨습니다. 하지만 지금은 가끔 우아하다는 소리를 듣습니다. 꿈을 이뤄가는 중인 것입니다. 그리고 올해 해외 랜드마크에서 보드를 타보겠다는 꿈을 이루고 왔습니다. 내년에는 어떤 꿈을 이룰 수 있을까요? 개인적으로는 작은 것이라도 협찬을 받아보고 싶습니다. 보드를 탈때 입는 옷이나 신발이면 좋겠네요. 그리고 잡지나 블로그에 인터뷰를 할 수 있으면 좋겠습니다. 개발자로서 좋은 취미를 가지게 된 이야기, 랜드서핑에 대한 이야기를 나눌 수 있는 잡지면 좋을 것 같습니다. 내년이 기대되네요.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/landsurfing/landsurfer/" data-id="cjajb82hj002ao0vghn5ln6zx" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/landsurfing/landsurfer/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gopro/">gopro</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/instagram/">instagram</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/landsurfers/">landsurfers</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/landsurfing/">landsurfing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/youtube/">youtube</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-functional-js-study-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/functional-js-study-2/" class="article-date">
  <time datetime="2017-10-19T09:41:14.000Z" itemprop="datePublished">2017-10-19</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/functional-js-study-2/">[함수형 자바스크립트] 함수형 자바스크립트 라이브러리</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="함수형-자바스크립트-라이브러리"><a href="#함수형-자바스크립트-라이브러리" class="headerlink" title="함수형 자바스크립트 라이브러리"></a>함수형 자바스크립트 라이브러리</h2><p>함수형으로 프로그래밍하는데 도움을 주는 자바스크립트 라이브러리를 알아보고 배워보자.<br>(모든 예제는 웹 브라우저의 ‘검사’ 도구를 열어서 테스트할 수 있다.)</p>
<h3 id="Partial-js"><a href="#Partial-js" class="headerlink" title="Partial.js"></a>Partial.js</h3><h5 id="0-Underscore"><a href="#0-Underscore" class="headerlink" title="0. Underscore"></a>0. Underscore</h5><p>자바스크립트 생태계에서 <code>_</code>(underscore)라는 네임스페이스는 보통 <a href="http://underscorejs.org/" target="_blank" rel="external">Underscore</a>나 <a href="https://lodash.com/" target="_blank" rel="external">Lodash</a>의 차지다. underscore가 먼저 등장했고 이후에 조금 더 다양한 함수와 기능으로 무장한 채로 lodash가 등장했다. 그리고 이제 같은 네임스페이스를 사용하지만 보다 함수형 프로그래밍에 적합한 <a href="https://marpple.github.io/partial.js/" target="_blank" rel="external">Partial</a>을 소개할 차례다.</p>
<h5 id="1-부분-적용-함수-partial"><a href="#1-부분-적용-함수-partial" class="headerlink" title="1. 부분 적용 함수 _.partial"></a>1. 부분 적용 함수 <code>_.partial</code></h5><p><a href="/programming/functional-js-study-1/">지난 시간</a>에 다룬 <code>_curryr</code> 함수는 해결되지 않은 문제를 가지고 있었다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = _curryr(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b);</div></pre></td></tr></table></figure>
<p><code>_curryr</code>에 의해 커링이 가능하게 만들어진 함수는 받을 수 있는 인자의 개수가 2개로 제한되어 있다는 점이었다. <code>_reduce</code>와 같이 3개 이상의 인자를 받는 함수가 커링이 가능하도록 만들기 위해서는 <code>_curryr</code>을 새로 만들어야하는 상황이었다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_curryr3</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length == <span class="number">1</span>) <span class="comment">// &lt;-- 인자의 수에 따라 다른 값을 리턴</span></div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> fn(b, a);</div><div class="line">      &#125;;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length == <span class="number">2</span>) </div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">c</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> fn(c, a, b);</div><div class="line">      &#125;;</div><div class="line">    <span class="keyword">return</span> fn(a, b, c); </div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>_curryr3</code>은 세개의 인자를 받는 함수라도 커링이 가능하도록 만들어주는 함수다. 허나 인자의 수에 따라 새로운 함수를 여러개 만들어 두는 것은 그리 근사한 방법이 아니다. 이 부분도 추상화가 가능하다. 바로 <code>_.partial</code> 함수다. 이 함수는 커링을 보다 높은 레벨로 추상화한 함수다. <code>_curry</code>와 마찬가지로 커링이 가능한 함수를 리턴하는 함수이지만 미리 값을 적용시켜둘 인자의 순서를 정할 수 있는 함수다. 사용법을 살펴보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum_init_0 = _.partial(_reduce, _, (total, num) =&gt; total + num, <span class="number">0</span>);</div><div class="line"><span class="built_in">console</span>.log(sum_init_0(arr)); <span class="comment">// 55</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> sum = _.partial(_reduce, _, (total, num) =&gt; total + num);</div><div class="line"><span class="built_in">console</span>.log(sum(arr, <span class="number">100</span>)); <span class="comment">// 155</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> reduce_arr = _.partial(_reduce, arr);</div><div class="line"><span class="built_in">console</span>.log(reduce_arr(<span class="function">(<span class="params">total, num</span>) =&gt;</span> total + num)); <span class="comment">// 55</span></div></pre></td></tr></table></figure>
<p><code>sum_init_0</code> 함수는 <code>0</code>을 초기값으로 가진 상태로 돌림직한 데이터가 가진 모든 수를 더하는 함수다. 선언되는 과정을 살펴보면 <code>_.partial</code> 함수에게 세개의 인자가 전달된다. 첫번째 인자인 <code>_reduce</code>는 커링의 대상이 될 함수다. 이후의 인자들은 <code>_reduce</code>에 전달될 인자를 의미한다. 두번째 인자는 <code>_</code>인데 이 부분은 나중에 받겠다는 의미가 된다. <strong>‘지금은 비워두고 나중에 값이 들어오면 여기에 넣어라’</strong>는 의미가 되는 셈이다. 반면 <code>(total, num) =&gt; total + num</code>과 <code>0</code>은 각각 <code>iter</code>, <code>memo</code>를 의미하고(<a href="/programming/functional-js-study/">기본 함수 구현하고 사용하기</a> 편의 <code>_reduce</code> 참고) <strong>‘지금 값을 넣어두겠다’</strong>는 의미가 된다. 이렇게 일정 부분만 미리 값을 넣어두는 행위를 <strong>부분 적용</strong>이라고 한다. </p>
<p><code>sum</code> 함수는 돌림직한 데이터가 가진 모든 수를 더하는 함수다. <code>sum_init_0</code>와는 초기값의 유무에서 차이가 생긴다. <code>_.partial</code> 함수를 살펴보면 마지막 인자 <code>0</code>이 없는 것을 알 수 있다. 이처럼 <code>_.partial</code>로 부분 적용된 함수를 만들 때 마지막 인자가 들어오지 않으면 <code>_</code>과 같은 취급을 한다. 즉 ‘지금은 비워두고 나중에 값이 들어오면 넣는’ 영역으로 본다. 결과적으로 <code>sum</code>은 <code>iter</code>만을 가진 함수가 되어 실행하는 시점에 데이터 <code>arr</code>와 초기값 <code>100</code>을 인자로 줄 수 있었다.</p>
<p>반면 <code>reduce_arr</code>는 데이터를 가지고 있지만 어떻게 돌리며 접어나갈지 정의 되지 않았다. 때문에 실행되는 시점에 어떻게 돌릴지 정의하는 함수를 주고 결과를 얻어낼 수 있었다. (<code>_reduce</code>는 초기값이 생략되면 데이터의 첫번째 값을 초기값으로 사용한다.)</p>
<p>이렇게 <code>_.partial</code>을 사용하면 <code>_curry</code>, <code>_curryr</code>이 가지고 있던 단점을 모두 보완할 수 있다. 실제 사용의 사례를 보면 이렇다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_.go(arr,</div><div class="line">  _.partial(_filter, _, n =&gt; n % <span class="number">2</span>),</div><div class="line">  _(_reduce, _, (a, b) =&gt; a + b, <span class="number">0</span>), <span class="comment">// &lt;-- 네임스페이스 '_'는 _.partial 함수다.</span></div><div class="line">  <span class="built_in">console</span>.log); <span class="comment">// 25</span></div></pre></td></tr></table></figure>
<p>위 코드에서 재미난 부분은 Partial.js에서는 네임스페이스인 <code>_</code>가 <code>_.partial</code> 함수라는 점이다. Partial이라는 라이브러리의 이름이 <code>_.partial</code> 함수와 같은 이유가 바로 이 때문이다. 사실 위의 코드는 <code>_.partial</code>의 사용 예를 보여주기만을 위한 코드라 그리 근사하지 않다. 지난 시간에 만든 <code>_filter</code>와 <code>_reduce</code> 대신 Partial.js의 함수들을 사용하면 보다 깔끔한 코드를 만들 수 있다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_.go(arr,</div><div class="line">  _.filter(<span class="function"><span class="params">n</span> =&gt;</span> n % <span class="number">2</span>),</div><div class="line">  _.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b),</div><div class="line">  <span class="built_in">console</span>.log); <span class="comment">// 25</span></div></pre></td></tr></table></figure>
<p><code>_.filter</code>와 <code>_.reduce</code>를 구현하는 코드에는 <code>_.partial</code> 함수가 사용되고 있기 때문에 위와 같은 부분 적용이 가능하다.</p>
<h5 id="2-go-pipe의-사용"><a href="#2-go-pipe의-사용" class="headerlink" title="2. _.go, _.pipe의 사용"></a>2. <code>_.go</code>, <code>_.pipe</code>의 사용</h5><p>우리는 이미 <code>_go</code>와 <code>_pipe</code>를 만들고 사용해보았다. 이번에 사용해볼 <code>_.go</code>와 <code>_.pipe</code>는 조금 특별한 비밀을 가지고 있다. 이전에 직접 만들었던 함수와 같은 일을 한다. 함수를 실행하거나 함수를 조합하여 리턴한다. 전달된 인자 중에 <strong>비동기 함수가 있더라도 완벽하게 제어해준다는 점</strong>을 제외하면 주요 역할은 동일한 함수다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">syncDate</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">promiseDate</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>&#123;</div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      resolve(<span class="keyword">new</span> <span class="built_in">Date</span>());</div><div class="line">    &#125;, <span class="number">1000</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">_.go([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  _.map(syncDate),</div><div class="line">  _.map(<span class="function"><span class="params">d</span> =&gt;</span> d.toString()),</div><div class="line">  <span class="built_in">console</span>.log);</div><div class="line"><span class="comment">// 결과:</span></div><div class="line"><span class="comment">//  ["Sun Feb 05 2017 03:33:36 GMT+0900 (KST)",</span></div><div class="line"><span class="comment">//   "Sun Feb 05 2017 03:33:36 GMT+0900 (KST)",</span></div><div class="line"><span class="comment">//   "Sun Feb 05 2017 03:33:36 GMT+0900 (KST)"]</span></div><div class="line"></div><div class="line">_.go([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  _.map(promiseDate),</div><div class="line">  _.map(<span class="function"><span class="params">d</span> =&gt;</span> d.toString()),</div><div class="line">  <span class="built_in">console</span>.log);</div><div class="line"><span class="comment">// 결과:</span></div><div class="line"><span class="comment">//  ["Sun Feb 05 2017 03:33:37 GMT+0900 (KST)",</span></div><div class="line"><span class="comment">//   "Sun Feb 05 2017 03:33:38 GMT+0900 (KST)",</span></div><div class="line"><span class="comment">//   "Sun Feb 05 2017 03:33:39 GMT+0900 (KST)"]</span></div></pre></td></tr></table></figure>
<p>위의 예제는 Partial.js의 <a href="https://marpple.github.io/partial.js/#컬렉션을-다루는-비동기-제어-함수" target="_blank" rel="external">소개 페이지</a>에 나오는 코드를 가져왔다. 잠깐 코드를 살펴보면 동기적으로 날짜를 리턴하는 <code>snycData</code> 함수와 비동기적으로 날짜를 리턴하는 <code>promiseData</code> 함수가 있다. 두 함수를 <code>_.map</code>에 넣어 실행하면 날짜 데이터를 갖는 배열을 리턴한다. 다시 한번 <code>_.map</code>으로 날짜 데이터를 문자열로 치환하여 리턴하면 결과값과 같은 날짜와 시간을 표시한 문자열이 담긴 배열이 나온다. 비동기 상황임에도 불구하고 동기 상황과 같은 결과를 리턴한다. 물론 3초정도의 시간이 소요된다. <a href="/programming/functional-js-study/">1주차</a>에 만들어본 일반 <code>_go</code>를 사용하면 위와 같은 결과를 만들어내지 못한다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_go([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  _.map(promiseDate),</div><div class="line">  _.map(<span class="function"><span class="params">d</span> =&gt;</span> d.toString()),</div><div class="line">  <span class="built_in">console</span>.log); <span class="comment">// []</span></div></pre></td></tr></table></figure>
<p>비동기 상황을 무시하고 지나가면서 빈 배열만을 리턴한다. 살펴본 것처럼 Partial.js <code>_.go</code>를 사용하면 이와 같은 문제없이 비동기 상황을 생각한대로 제어할 수 있다.</p>
<h5 id="3-템플릿-함수-template"><a href="#3-템플릿-함수-template" class="headerlink" title="3. 템플릿 함수 _.template"></a>3. 템플릿 함수 <code>_.template</code></h5><p>HTML 코드를 보다 쉽게 작성하기 위해 <a href="https://pugjs.org/api/getting-started.html" target="_blank" rel="external">Pug</a>, <a href="http://handlebarsjs.com/" target="_blank" rel="external">Handlebars.js</a>, <a href="http://www.embeddedjs.com/" target="_blank" rel="external">ejs</a>와 같은 템플릿 엔진이 존재한다. Partial.js는 함수 스타일의 템플릿 엔진인 <code>_.template</code> 함수를 지원한다. Pug와 같은 문법을 사용하는 이 함수의 사용법에 대한 자세한 설명은 <a href="https://marpple.github.io/partial.js/#함수-스타일의-템플릿-함수" target="_blank" rel="external">소개 페이지</a>에서 확인할 수 있다.</p>
<h3 id="함수형-jQuery-don-js"><a href="#함수형-jQuery-don-js" class="headerlink" title="함수형 jQuery, don.js"></a>함수형 jQuery, don.js</h3><h5 id="1-jQuery-vs-don-js"><a href="#1-jQuery-vs-don-js" class="headerlink" title="1. jQuery vs don.js"></a>1. jQuery vs don.js</h5><p>don.js는 jQuery가 지원하는 함수들을 함수형 스타일로 지원한다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// jQuery</span></div><div class="line">$(<span class="string">'body'</span>); </div><div class="line">$(<span class="string">'body'</span>).addClass(<span class="string">'container'</span>);</div><div class="line"></div><div class="line"><span class="comment">// don.js</span></div><div class="line">D(<span class="string">'body'</span>); </div><div class="line">D.addClass(D(<span class="string">'body'</span>), <span class="string">'container'</span>);</div></pre></td></tr></table></figure>
<p>jQuery가 체인 방식으로 함수들을 이어나가는 것과 달리 <strong>don.js는 함수의 리턴값을 사용함</strong>으로 함수를 이어나간다. 때문에 Partial.js와 궁합이 잘 맞는다. </p>
<h5 id="2-Don-js-with-Partial-js"><a href="#2-Don-js-with-Partial-js" class="headerlink" title="2. Don.js with Partial.js"></a>2. Don.js with Partial.js</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// jQuery (http://api.jquery.com/map/)</span></div><div class="line"><span class="built_in">console</span>.log(</div><div class="line">  $( <span class="string">":checkbox"</span> )</div><div class="line">    .map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.id;</div><div class="line">    &#125;)</div><div class="line">    .get() <span class="comment">// &lt;-- 이때 배열이 된다.</span></div><div class="line">    .join());</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// don.js</span></div><div class="line">_.go(</div><div class="line">  D(<span class="string">'[type="checkbox"]'</span>),</div><div class="line">  _.map(<span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> el.id;</div><div class="line">  &#125;), <span class="comment">// &lt;-- 이미 배열인 상태다.</span></div><div class="line">  _.join(), <span class="comment">// arr =&gt; arr.join(),</span></div><div class="line">  _.log);</div></pre></td></tr></table></figure>
<p>jQuery가 셀렉터를 통해 찾아 리턴하는 값이 jQuery 객체인데 반해 don.js의 리턴값은 기본형 데이터인 배열이거나 엘리먼트 자체임으로 어떤 순수 함수인 다른 함수들과 조합이 자유롭다. 위의 예제에서 jQuery의 경우, <code>map</code>을 실행한 뒤에 <code>get</code>을 실행하지 않으면 배열의 기본 메서드인 <code>join</code>을 실행할 수 없다. 하지만 don.js는 항상 기본형 데이터를 사용하기 때문에 자유롭게 함수들을 이어갈 수 있다. </p>
<p><code>_.template</code> 계열의 템플릿 함수들과 함께 사용하면 더 don.js를 재미있고 유용하게 사용할 수 있다. 우선 예제를 위해 아래와 같은 주문서 데이터(<code>projections</code>)가 있다고 가정하자. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> projections = [</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">user_id</span>: <span class="number">2</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'ID'</span>, <span class="attr">age</span>: <span class="number">36</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'긴팔티'</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'후드티'</span> &#125; ] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">user_id</span>: <span class="number">7</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'BJ'</span>, <span class="attr">age</span>: <span class="number">32</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'긴팔티'</span> &#125; ] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">user_id</span>: <span class="number">8</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'JM'</span>, <span class="attr">age</span>: <span class="number">34</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'에코백'</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'청바지'</span> &#125;] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">user_id</span>: <span class="number">9</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'PJ'</span>, <span class="attr">age</span>: <span class="number">27</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'양말'</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'후드티'</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'긴팔티'</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'에코백'</span> &#125; ] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">user_id</span>: <span class="number">1</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'HA'</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'에코백'</span> &#125; ] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">user_id</span>: <span class="number">11</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'JE'</span>, <span class="attr">age</span>: <span class="number">26</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'머플러'</span> &#125; ] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">7</span>, <span class="attr">user_id</span>: <span class="number">12</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'JI'</span>, <span class="attr">age</span>: <span class="number">31</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'머그컵'</span> &#125; ] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">8</span>, <span class="attr">user_id</span>: <span class="number">15</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'MP'</span>, <span class="attr">age</span>: <span class="number">23</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'에코백'</span> &#125; ] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">9</span>, <span class="attr">user_id</span>: <span class="number">15</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'MP'</span>, <span class="attr">age</span>: <span class="number">23</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'에코백'</span> &#125;] &#125; &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">10</span>, <span class="attr">user_id</span>: <span class="number">15</span>, <span class="attr">_</span>: &#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">'MP'</span>, <span class="attr">age</span>: <span class="number">23</span> &#125;, <span class="attr">products</span>: [ &#123; <span class="attr">name</span>: <span class="string">'에코백'</span> &#125;] &#125; &#125;,</div><div class="line">];</div></pre></td></tr></table></figure>
<p>예제 데이터는 주문서의 아이디, 주문자의 정보와 제품 정보를 담고 있다. 이를 이용해서 주문 목록을 그린다고 가정해보자. 템플릿 함수 중 하나인 <code>_.t$</code>(<code>_.template$</code>의 약식) 함수를 사용하면 아래와 같은 코드로 원하는 목록을 그릴 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">_.go(</div><div class="line">  projections,</div><div class="line">  _.sum(_.t$(<span class="string">`</span></div><div class="line">    li#&#123;&#123;$.id&#125;&#125;</div><div class="line">      .user_info#&#123;&#123;$.user_id&#125;&#125;</div><div class="line">        h4 &#123;&#123;$._.user.name&#125;&#125;</div><div class="line">      ul.products &#123;&#123;_.sum($._.products, `, _.t$(<span class="string">`</span></div><div class="line">        li &#123;&#123;$.name&#125;&#125;</div><div class="line">      `) ,<span class="string">`)&#125;&#125;</span></div><div class="line">      button 주문취소</div><div class="line">      `)),</div><div class="line">  <span class="comment">// _.hi, // &lt;-- 앞의 주석을 제거하면 어떤 문자열이 만들어지는지 확인할 수 있다.</span></div><div class="line">  D.appendTo(<span class="string">'.user_list'</span>));</div></pre></td></tr></table></figure>
<p><code>_.sum</code>은 <code>projections</code> 데이터를 바탕으로 <code>_.t$</code> 함수가 만들어낸 HTML 문자열을 하나의 문자열로 합쳐준다. 이렇게 합쳐진 긴 문자열은 <code>D.appendTo</code> 함수에게 전달되는데 이 함수는 <code>&#39;.user_list&#39;</code>라는 문자열을 인자로 받았다. 클래스 명이 ‘user_product’에 해당하는 엘리먼트에게 이후에 들어오는 HTML 문자열을 엘리먼트로 변환해서 붙여넣겠다는 의미다. 결과적으로 앞에서 <code>_.sum</code>에 의해 합쳐진 문자열이 <code>D.appendTo</code>에 의해 엘리먼트로 변환되고 ‘user_product’에 해당하는 클래스를 가진 곳에 붙여진다. </p>
<p>이벤트를 달아서 주문을 취소하는 동작을 만들기 위해선 아래와 같은 <code>on</code> 함수를 사용하면 된다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">_.go(</div><div class="line">  D(<span class="string">'body'</span>),</div><div class="line">  D.on(<span class="string">'click'</span>, <span class="string">'button'</span>, _.pipe(</div><div class="line">    _.v(<span class="string">'$currentTarget'</span>),</div><div class="line">    D.parent(<span class="string">'li'</span>),</div><div class="line">    D.hide)</div><div class="line">  ));</div></pre></td></tr></table></figure>
<p><code>_.pipe</code> 함수가 등장했다. <code>D.on</code> 함수의 세번째 인자로 받을 함수는 ‘클릭 이벤트가 발생하면 어떤 일을 할지 정의한 함수’가 들어와야 한다. 이 함수를 <code>_.pipe</code>가 여러개의 함수를 조합해서 만들었다. 내부를 보면 <code>_.v(&#39;$currentTarget&#39;)</code> 함수가 이벤트의 대상이 되는 엘리먼트를 꺼내고 <code>D.parent(&#39;li&#39;)</code>가 부모 중에 li 엘리먼트인 것을 찾아 리턴한다. 마지막에 <code>D.hide</code>가 리턴된 엘리먼트를 숨긴다. 이러한 순서에 의해 버튼을 클릭하면 대상을 담고 있는 li 엘리먼트가 가려지는 동작을 수행한다. </p>
<hr>
<h3 id="전체-스터디-일정"><a href="#전체-스터디-일정" class="headerlink" title="전체 스터디 일정"></a>전체 스터디 일정</h3><h5 id="1주차-기본-함수-구현하고-사용하기"><a href="#1주차-기본-함수-구현하고-사용하기" class="headerlink" title="1주차 | 기본 함수 구현하고 사용하기"></a>1주차 | <a href="/programming/functional-js-study/">기본 함수 구현하고 사용하기</a></h5><h5 id="2주차-고차-함수와-커링-currying"><a href="#2주차-고차-함수와-커링-currying" class="headerlink" title="2주차 | 고차 함수와 커링(currying)"></a>2주차 | <a href="/programming/functional-js-study-1/">고차 함수와 커링(currying)</a></h5><h5 id="3주차-함수형-자바스크립트-라이브러리"><a href="#3주차-함수형-자바스크립트-라이브러리" class="headerlink" title="3주차 | 함수형 자바스크립트 라이브러리"></a>3주차 | 함수형 자바스크립트 라이브러리</h5><h5 id="4주차-Movie-Box-1-필터링-정렬"><a href="#4주차-Movie-Box-1-필터링-정렬" class="headerlink" title="4주차 | Movie Box 1 - 필터링, 정렬"></a><em>4주차 | Movie Box 1 - 필터링, 정렬</em></h5><h5 id="5주차-Movie-Box-2-필터링-정렬-복습"><a href="#5주차-Movie-Box-2-필터링-정렬-복습" class="headerlink" title="5주차 | Movie Box 2 - 필터링, 정렬 복습"></a><em>5주차 | Movie Box 2 - 필터링, 정렬 복습</em></h5><h5 id="6주차-Movie-Box-3-지연평가-L-memoize"><a href="#6주차-Movie-Box-3-지연평가-L-memoize" class="headerlink" title="6주차 | Movie Box 3 - 지연평가 L, memoize"></a><em>6주차 | Movie Box 3 - 지연평가 L, memoize</em></h5><h5 id="7주차-Movie-Box-4-비동기-상황-다루기"><a href="#7주차-Movie-Box-4-비동기-상황-다루기" class="headerlink" title="7주차 | Movie Box 4 - 비동기 상황 다루기"></a><em>7주차 | Movie Box 4 - 비동기 상황 다루기</em></h5><p><a href="https://github.com/joeunha/functional-js-study/tree/master/03_week" target="_blank" rel="external">예제 코드</a></p>
<script async>
var arr = [1,2,3,4,5,6,7,8,9,10];

function _filter(list, iter) {
  var res = [];
  if (Array.isArray(list)) {
    for (var i = 0, len = list.length; i < len; i++) 
      if (iter(list[i], i, list)) 
        res.push(list[i]);
  } else {
    var keys = Object.keys(list);
    for (var i = 0, len = keys.length; i < len; i++) 
      if (iter(list[keys[i]], keys[i], list)) 
        res.push(list[keys[i]]);
  }
  return res;
}

function _reduce(list, iter, memo) {
  var i = 0;
  if (Array.isArray(list)) {
    var res = (memo != undefined ? memo : list[i++]);
    for (var len = list.length; i < len; i++) 
      res = iter(res, list[i], i, list);
  } else {
    var keys = Object.keys(list), res = (memo != undefined ? memo : list[keys[i++]]);
    for (var len = keys.length; i < len; i++) 
      res = iter(res, list[keys[i]], keys[i], list);
  }
  return res;
}

var projections = [
  { id: 1, user_id: 2, _: { user: { name: 'ID', age: 36 }, products: [ { name: '긴팔티' }, { name: '후드티' } ] } },
  { id: 2, user_id: 7, _: { user: { name: 'BJ', age: 32 }, products: [ { name: '긴팔티' } ] } },
  { id: 3, user_id: 8, _: { user: { name: 'JM', age: 34 }, products: [ { name: '에코백' }, { name: '청바지' }] } },
  { id: 4, user_id: 9, _: { user: { name: 'PJ', age: 27 }, products: [ { name: '양말' }, { name: '후드티' }, { name: '긴팔티' }, { name: '에코백' } ] } },
  { id: 5, user_id: 1, _: { user: { name: 'HA', age: 25 }, products: [ { name: '에코백' } ] } },
  { id: 6, user_id: 11, _: { user: { name: 'JE', age: 26 }, products: [ { name: '머플러' } ] } },
  { id: 7, user_id: 12, _: { user: { name: 'JI', age: 31 }, products: [ { name: '머그컵' } ] } },
  { id: 8, user_id: 15, _: { user: { name: 'MP', age: 23 }, products: [ { name: '에코백' } ] } },
  { id: 9, user_id: 15, _: { user: { name: 'MP', age: 23 }, products: [ { name: '에코백' }] } },
  { id: 10, user_id: 15, _: { user: { name: 'MP', age: 23 }, products: [ { name: '에코백' }] } },
];
</script>
<script async src="https://rawgit.com/joeunha/cdn/master/don.js"></script>
<script async src="https://rawgit.com/marpple/partial.js/master/partial.min.js"></script>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/functional-js-study-2/" data-id="cjajb82gl0017o0vgkuoa9xqk" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/functional-js-study-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/partial-js/">partial.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/자바스크립트/">자바스크립트</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-자바스크립트/">함수형 자바스크립트</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-프로그래밍/">함수형 프로그래밍</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-functional-js-study-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/functional-js-study-1/" class="article-date">
  <time datetime="2017-10-18T09:49:54.000Z" itemprop="datePublished">2017-10-18</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/functional-js-study-1/">[함수형 자바스크립트] 고차 함수와 커링(currying)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="고차-함수와-커링-currying"><a href="#고차-함수와-커링-currying" class="headerlink" title="고차 함수와 커링(currying)"></a>고차 함수와 커링(currying)</h2><p>함수형 프로그래밍의 꽃인 고차 함수 개념과 커링에 대해서 이야기 해보자.<br>(모든 예제는 웹 브라우저의 ‘검사’ 도구를 열어서 테스트할 수 있다.)</p>
<h3 id="보조-함수의-활용"><a href="#보조-함수의-활용" class="headerlink" title="보조 함수의 활용"></a>보조 함수의 활용</h3><h5 id="1-고차-함수란"><a href="#1-고차-함수란" class="headerlink" title="1. 고차 함수란?"></a>1. 고차 함수란?</h5><p>고차 함수는 <strong>값으로 다룰 수 있는 함수</strong>다. 함수를 값으로 다룰 수 있기 때문에 <strong>함수를 인자로 사용</strong>할 수도 있고 함수를 <strong>리턴값으로 사용</strong>할 수도 있다. 이러한 특징을 잘 보여주는 예제가 <a href="/programming/functional-js-study/">지난 시간</a> 살펴본 함수들이 가진 보조함수들이다. <code>_each</code>를 다시 한번 살펴보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">_each([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], num =&gt; <span class="built_in">console</span>.log(num)); <span class="comment">// _each 함수에 두번째 인자로 함수가 사용된다.</span></div></pre></td></tr></table></figure>
<p>화살표 함수로 정의된 <code>num =&gt; console.log(num)</code>가 <code>_each</code> 함수의 인자로 전달되고 이는 보조함수의 역할을 한다. 인자로 함수를 넘겨서 어떤 일을 수행해야하는지를 전달한다면 함수의 추상화 레벨이 올라간다. <code>_each</code>의 경우 반복적으로 동일한 일을 처리하는 경우를 추상화해두고 그 일이 어떤 일인지는 개발자가 함수를 호출하는 시기에 결정할 수 있도록 위임한 것이다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> persons = [</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'JE'</span>, <span class="attr">age</span>: <span class="number">27</span> &#125;, </div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'SJ'</span>, <span class="attr">age</span>: <span class="number">34</span> &#125;,</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'HR'</span>, <span class="attr">age</span>: <span class="number">38</span> &#125;,</div><div class="line">  &#123; <span class="attr">name</span>: <span class="string">'YS'</span>, <span class="attr">age</span>: <span class="number">27</span> &#125;</div><div class="line">];</div><div class="line"><span class="keyword">var</span> YB = _filter(persons, person =&gt; person.age &lt; <span class="number">30</span>);</div><div class="line"><span class="built_in">console</span>.log(YB); <span class="comment">// [&#123; name: 'JE', age: 27 &#125;, &#123; name: 'YS', age: 27 &#125;]</span></div></pre></td></tr></table></figure>
<p><code>_filter</code> 함수는 어떤 조건에 따라 원하는 데이터를 골라내는 함수다. 위의 예제는 30세 미만의 사람만 골라냈다. 고차 함수인 <code>person =&gt; person.age &lt; 30</code> 함수를 어떤 조건을 정의해 전달함으로써 추상화된 <code>_filter</code> 라는 함수를 사용할 수 있었다.</p>
<h5 id="2-callback-iteratee-predicate의-차이"><a href="#2-callback-iteratee-predicate의-차이" class="headerlink" title="2. callback, iteratee, predicate의 차이"></a>2. callback, iteratee, predicate의 차이</h5><p>지난 시간에 확인한 것처럼 <code>_each</code> 함수의 내부에서는 두번째 인자로 전달되는 보조함수를 <code>iter</code>라고 정의하고 있는데 이는 ‘iteratee’의 준말이다. 반복되는 함수라는 뜻이다. <code>_filter</code> 함수는 같은 함수를 <code>predi</code>라고 정의하고 있다. 술부라는 의미를 가진 ‘predicate’의 준말이다. 결과값이 어떠해야 하는지 정의하고 있는 함수이기 때문이다.<br>보조함수 중에서 잘 알려진 함수는 ‘callback’ 함수다. 유명세 때문인지 ‘보조함수(고차함수) === 콜백함수’라고 생각하는 경우도 있다. 하지만 보조함수가 가지는 이름 callback, iteratee, predicate는 그 함수가 하는 역할에 따라 지어진 이름일 뿐이다. callback 함수가 ‘회신’이라는 의미를 가지고 비동기 상황이 끝난 뒤에 어떠한 일을 할지 정의하는 함수인 것처럼 다른 보조함수들도 그에 맞는 이름을 갖는 것이다. </p>
<p>지금까지 인자로 사용하는 함수인 보조함수를 통해 고차 함수를 알아봤다. 그렇다면 리턴값으로 사용되는 고차 함수는 어떤 경우가 있을까? 커링(currying)을 통해 그 예를 살펴보자.</p>
<h3 id="고차-함수의-응용"><a href="#고차-함수의-응용" class="headerlink" title="고차 함수의 응용"></a>고차 함수의 응용</h3><h5 id="0-커링이란"><a href="#0-커링이란" class="headerlink" title="0. 커링이란?"></a>0. 커링이란?</h5><p>수학자 Haskell Curry의 이름을 딴 이 기법은 <strong>함수가 함수를 만드는 기법</strong>이다. 함수로 함수를 만들기 위해선 결과값으로 함수를 전달할 수 있어야한다. 이 지점에서 리턴값으로 사용할 수 있는 고차 함수가 등장한다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> a + b;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>커링을 이야기할때 가장 자주 등장하는 형태의 함수다. 이 함수 <code>add</code>는 인자 <code>a</code>를 받고 익명 함수를 리턴한다. 리턴된 익명 함수는 <code>b</code>를 받고 <code>a</code>와 <code>b</code>를 더한 값을 리턴한다. 리턴되는 익명 함수는 <code>a</code>에 대해 알고 있는 클로저다. 때문에 이후에 들어오는 값인 <code>b</code>와 <code>a</code>를 이용해 어떠한 일을 할 수 있는 함수가 된다. </p>
<p><code>add</code> 함수는 이렇게 사용할 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add10 = add(<span class="number">10</span>); <span class="comment">// &lt;-- 함수를 리턴했다.</span></div><div class="line"><span class="built_in">console</span>.log(add10(<span class="number">11</span>)); <span class="comment">// 21</span></div><div class="line"><span class="built_in">console</span>.log(add10(<span class="number">21</span>)); <span class="comment">// 31</span></div></pre></td></tr></table></figure></p>
<p><code>10</code>이라는 값을 알고 있는 익명 함수가 <code>add10</code>이라는 변수에 담긴다. 클로저인 익명 함수가 <code>add10</code>이라는 이름을 갖게된 것이다. 새로운 이름을 가진 이 함수가 실행되면 자신이 알고 있는 <code>10</code>과 새로 받는 값을 모두 이용할 수 있다. 최초의 <code>add</code> 함수 정의에서 두 값을 더하는 것으로 정했기 때문에 이후에 들어온 값 <code>11</code>이나 <code>21</code>을 <code>10</code>과 더하는 일을 수행한다. </p>
<p><code>add</code> 함수를 정의할 때 화살표 함수를 사용하면 조금 더 근사하다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="params">a</span> =&gt;</span> b =&gt; a + b;</div></pre></td></tr></table></figure>
<p>이러한 형태의 함수는 미리 정의된 일 밖에 할 수 없으니 아쉽다. 커링하는 일 자체를 추상화하는 새로운 함수를 만들어보자.</p>
<h5 id="1-curry-함수"><a href="#1-curry-함수" class="headerlink" title="1. curry 함수"></a>1. curry 함수</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_curry</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> fn(a, b);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// var _curry = a =&gt; b =&gt; fn(a, b);</span></div></pre></td></tr></table></figure>
<p>함수가 익명 함수를 리턴했는데 그 함수가 다시 함수를 리턴한다. 복잡한것처럼 보이지만 단순하다. 천천히 살펴보자. </p>
<p>우선 <code>_curry</code>는 함수를 인자로 받는다. 이때 받은 함수를 커링이 되는 함수로 만드는 것이 <code>_curry</code> 함수의 목표다. 목표를 달성하기 위해 다짜고짜 첫번째 익명 함수를 리턴한다. 첫번째 익명 함수는 <code>fn</code>이 사용할 첫번째 인자를 받는 함수다. <code>a</code>를 받은 뒤에 다시 한번 더 익명 함수를 리턴한다. 두번째 익명 함수다. 두번째 함수는 <code>fn</code>에게 필요한 두번째 인자를 받고 <code>fn</code>을 실행한다. 그 결과를 리턴한다. 글로만 읽으면 어떻게 동작하는지 이해하기 어렵다. 예제를 보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = _curry(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b); <span class="comment">// &lt;-- 첫번째 함수를 리턴했다.</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> add10 = add(<span class="number">10</span>); <span class="comment">// &lt;-- 두번째 함수를 리턴했다.</span></div><div class="line"><span class="built_in">console</span>.log(add10(<span class="number">11</span>)); <span class="comment">// 21</span></div><div class="line"><span class="built_in">console</span>.log(add10(<span class="number">21</span>)); <span class="comment">// 31</span></div></pre></td></tr></table></figure>
<p>커링하는 일을 추상화 해둔 <code>_curry</code>라는 함수를 사용했다. 덕분에 어떤 일을 할지 <code>_curry</code>에 함수에 전달하는 것만으로 커링이 가능한 함수를 만들 수 있게 되었다. 다른 함수도 쉽게 만들 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sum = _curry(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</div><div class="line"><span class="keyword">var</span> sum10 = sum(<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(sum10(<span class="number">5</span>)); <span class="comment">// 5</span></div></pre></td></tr></table></figure>
<p>이처럼 <code>_curry</code> 함수를 이용해서 사칙 연산 함수들을 커링이 가능한 함수로 만들 수 있다. 그런데 가만 생각해보면 좀 이상하다 <code>sum10</code>이라는 이름을 생각해보자. <strong>10을 뺄 준비가 된 함수</strong>여야할 것 같은데 반대가 되어버린다. (이 대목에서 이상하다고 생각하지 않아도 괜찮다.) <code>_curryr</code>이라는 함수를 만들어서 덜 이상하게 순서를 바꿔보자. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> _curryr = <span class="function"><span class="params">a</span> =&gt;</span> b =&gt; fn(b, a);</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum = _curryr(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</div><div class="line"><span class="keyword">var</span> sum10 = sum(<span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(sum10(<span class="number">5</span>)); <span class="comment">// -5</span></div></pre></td></tr></table></figure>
<p><code>_curryr</code>을 구현하기 위해선 인자 <code>fn</code>의 인자 순서를 뒤집어주면(reverse) 된다. 이제 <code>sum10</code>은 <strong>10을 뺄 준비가 된 함수</strong>가 됐다. 어떤 수가 들어오건 10을 뺀다. 이 상태가 되면 이제 지난 시간에 만들어둔 함수들을 발전시킬 수 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 커링 적용 전</span></div><div class="line">_go([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],</div><div class="line">  arr =&gt; _filter(arr, num =&gt; num % <span class="number">2</span>), <span class="comment">// &lt;-- 함수로 한번 감싸서 실행시킨다.</span></div><div class="line">  arr =&gt; _each(arr, num =&gt; <span class="built_in">console</span>.log(num))); <span class="comment">// &lt;-- 코드가 복잡하다.</span></div><div class="line"></div><div class="line">_filter = _curryr(_filter);</div><div class="line">_each = _curryr(_each);</div><div class="line"></div><div class="line"><span class="comment">// 커링 적용 후</span></div><div class="line">_go([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],</div><div class="line">  _filter(<span class="function"><span class="params">num</span> =&gt;</span> num % <span class="number">2</span>), <span class="comment">// &lt;-- 어떤 일을 해야하는지 알고 있는 함수가 이 자리에 리턴된다.</span></div><div class="line">  _each(<span class="function"><span class="params">num</span> =&gt;</span> <span class="built_in">console</span>.log(num))); <span class="comment">// &lt;-- 코드가 간결하다.</span></div></pre></td></tr></table></figure>
<p>커링이 적용된 발전된 함수는 <code>_go</code> 함수 안에서 보다 간결하게 의미를 전달 수 있는 코드가 되었다. <code>_filter</code>와 <code>_each</code>가 보조함수를 기억한 함수를 리턴한 뒤에 <code>_go</code>가 실행되면 <code>_go</code>는 첫번째 인자인 배열을 <code>_filter</code>와 <code>_each</code>가 남긴 함수에게 전달해서 각각의 일을 수행하도록 한다. 커링으로 간결하고 읽기 좋은 코드가 되었다. </p>
<p>하지만 이 코드에서도 문제가 남아있다. 바로 커링이 적용된 함수들을 원래 방법대로 사용할 수 없다는 점이다. 지금 상황에서는 <code>_filter</code>에 인자를 동시에 두개를 넘겨도 함수를 리턴할 것이다. 약간의 수정이 필요하다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_curryr</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !b ? <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> fn(b, a);</div><div class="line">    &#125; : fn(a, b);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// var _curryr = fn =&gt; (a, b) =&gt; (!b ? b =&gt; fn(b, a) : fn(a, b))</span></div></pre></td></tr></table></figure>
<p>첫번째 익명 함수에 인자가 하나만 들어왔다면 커링을 적용한 함수를 리턴하고 그렇지 않다면 그냥 원래 방법대로 함수를 실행핟 결과를 리턴하도록 바꿔주면 모든 문제가 해결된다. 물론 인자를 두개 받지 못한다는 단점은 여전히 존재한다. 이 문제는 다음 시간에 해결할 계획이다.</p>
<h5 id="2-pipe-함수-만들기"><a href="#2-pipe-함수-만들기" class="headerlink" title="2. _pipe 함수 만들기"></a>2. <code>_pipe</code> 함수 만들기</h5><p><code>_pipe</code> 함수는 함수를 조합하는 함수다. 여러 개의 함수가 조합된 새로운 함수를 만들기 위해 사용한다. 이런 식으로 사용할 것이다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> odd_sum = _pipe(_filter(<span class="function"><span class="params">n</span> =&gt;</span> n % <span class="number">2</span>), _reduce(<span class="function">(<span class="params">t, n</span>) =&gt;</span> t + n));</div><div class="line"></div><div class="line">_go([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],</div><div class="line">  odd_sum,</div><div class="line">  <span class="built_in">console</span>.log); <span class="comment">// 16</span></div></pre></td></tr></table></figure></p>
<p><code>_filter</code>와 <code>_reduce</code>를 조합해서 홀수값의 총합을 만드는 함수를 만들었다. 이 함수는 어떤 배열이 들어와도 홀수값의 합을 반환하는 함수가 된다. 이처럼 반복적으로 사용될만한 함수 조합을 <code>_pipe</code>로 묶어서 정의해두면 함수의 활용성이 좋아진다. </p>
<p>끝으로 어떻게 구현하는지 살펴보자. 아래와 같이 <code>_go</code>를 사용하면 쉽게 구현할 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> slice = <span class="built_in">Array</span>.prototype.slice;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_pipe</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> fns = slice.call(<span class="built_in">arguments</span>)</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">seed</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> _go.apply(<span class="literal">null</span>, [seed, ...fns]);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h3 id="전체-스터디-일정"><a href="#전체-스터디-일정" class="headerlink" title="전체 스터디 일정"></a>전체 스터디 일정</h3><h5 id="1주차-기본-함수-구현하고-사용하기"><a href="#1주차-기본-함수-구현하고-사용하기" class="headerlink" title="1주차 | 기본 함수 구현하고 사용하기"></a>1주차 | <a href="/programming/functional-js-study/">기본 함수 구현하고 사용하기</a></h5><h5 id="2주차-고차-함수와-커링-currying"><a href="#2주차-고차-함수와-커링-currying" class="headerlink" title="2주차 | 고차 함수와 커링(currying)"></a>2주차 | 고차 함수와 커링(currying)</h5><h5 id="3주차-함수형-자바스크립트-라이브러리"><a href="#3주차-함수형-자바스크립트-라이브러리" class="headerlink" title="3주차 | 함수형 자바스크립트 라이브러리"></a>3주차 | <a href="/programming/functional-js-study-2/">함수형 자바스크립트 라이브러리</a></h5><h5 id="4주차-Movie-Box-1-필터링-정렬"><a href="#4주차-Movie-Box-1-필터링-정렬" class="headerlink" title="4주차 | Movie Box 1 - 필터링, 정렬"></a>4주차 | <a href="/programming/functional-js-study-3/">Movie Box 1 - 필터링, 정렬</a></h5><h5 id="5주차-Movie-Box-2-필터링-정렬-복습"><a href="#5주차-Movie-Box-2-필터링-정렬-복습" class="headerlink" title="5주차 | Movie Box 2 - 필터링, 정렬 복습"></a><em>5주차 | Movie Box 2 - 필터링, 정렬 복습</em></h5><h5 id="6주차-Movie-Box-3-지연평가-L-memoize"><a href="#6주차-Movie-Box-3-지연평가-L-memoize" class="headerlink" title="6주차 | Movie Box 3 - 지연평가 L, memoize"></a><em>6주차 | Movie Box 3 - 지연평가 L, memoize</em></h5><h5 id="7주차-Movie-Box-4-비동기-상황-다루기"><a href="#7주차-Movie-Box-4-비동기-상황-다루기" class="headerlink" title="7주차 | Movie Box 4 - 비동기 상황 다루기"></a><em>7주차 | Movie Box 4 - 비동기 상황 다루기</em></h5><p><a href="https://github.com/joeunha/functional-js-study/tree/master/02_week" target="_blank" rel="external">예제 코드</a></p>
<script src="/js/functional.js"></script>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/functional-js-study-1/" data-id="cjajb82fm000fo0vgzzg23blx" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/functional-js-study-1/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/currying/">currying</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/higher-order-function/">higher-order function</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/partial-js/">partial.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/고차-함수/">고차 함수</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/자바스크립트/">자바스크립트</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/커링/">커링</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-자바스크립트/">함수형 자바스크립트</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-프로그래밍/">함수형 프로그래밍</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-functional-js-study" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/functional-js-study/" class="article-date">
  <time datetime="2017-10-17T06:36:32.000Z" itemprop="datePublished">2017-10-17</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/functional-js-study/">[함수형 자바스크립트] 기본 함수 구현하고 사용하기</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="기본-함수-구현하고-사용하기"><a href="#기본-함수-구현하고-사용하기" class="headerlink" title="기본 함수 구현하고 사용하기"></a>기본 함수 구현하고 사용하기</h2><p>함수형 프로그래밍에서 사용되는 기본 함수인 <code>each</code>, <code>map</code>, <code>filter</code>, <code>reduce</code> 함수와 함수를 실행하는 함수인 <code>go</code> 함수를 사용해보고 직접 구현해보자.<br>(모든 예제는 웹 브라우저의 ‘검사’ 도구를 열어서 테스트할 수 있다.)</p>
<h3 id="함수형-실전-코드-예제-소개"><a href="#함수형-실전-코드-예제-소개" class="headerlink" title="함수형 실전 코드 예제 소개"></a>함수형 실전 코드 예제 소개</h3><h5 id="0-예제-데이터"><a href="#0-예제-데이터" class="headerlink" title="0. 예제 데이터"></a>0. 예제 데이터</h5><p>이하 예제에서 사용될 데이터이다. <code>products</code>는 객체 형태의 상품 정보를 담고 있는 배열이다. 장바구니에 담긴 데이터라고 가정하고 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> products = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">is_selected</span>: <span class="literal">true</span>, <span class="comment">// &lt;--- 장바구니에서 체크 박스 선택</span></div><div class="line">    name: <span class="string">"반팔티"</span>,</div><div class="line">    <span class="attr">price</span>: <span class="number">10000</span>, <span class="comment">// &lt;--- 기본 가격</span></div><div class="line">    sizes: [ <span class="comment">// &lt;---- 장바구니에 담은 동일 상품의 사이즈 별 수량과 가격</span></div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">"L"</span>, <span class="attr">quantity</span>: <span class="number">2</span>, <span class="attr">price</span>: <span class="number">0</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">"XL"</span>, <span class="attr">quantity</span>: <span class="number">3</span>, <span class="attr">price</span>: <span class="number">0</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">"2XL"</span>, <span class="attr">quantity</span>: <span class="number">2</span>, <span class="attr">price</span>: <span class="number">2000</span> &#125;, <span class="comment">// &lt;-- 옵션의 추가 가격</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">is_selected</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">name</span>: <span class="string">"후드티"</span>,</div><div class="line">    <span class="attr">price</span>: <span class="number">21000</span>,</div><div class="line">    <span class="attr">sizes</span>: [</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">"L"</span>, <span class="attr">quantity</span>: <span class="number">3</span>, <span class="attr">price</span>: <span class="number">-1000</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">"2XL"</span>, <span class="attr">quantity</span>: <span class="number">1</span>, <span class="attr">price</span>: <span class="number">2000</span> &#125;,</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">is_selected</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">name</span>: <span class="string">"맨투맨"</span>,</div><div class="line">    <span class="attr">price</span>: <span class="number">16000</span>,</div><div class="line">    <span class="attr">sizes</span>: [</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">"L"</span>, <span class="attr">quantity</span>: <span class="number">4</span>, <span class="attr">price</span>: <span class="number">0</span> &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">];</div></pre></td></tr></table></figure></p>
<h5 id="1-모든-제품의-전체-수량-구하기"><a href="#1-모든-제품의-전체-수량-구하기" class="headerlink" title="1. 모든 제품의 전체 수량 구하기"></a>1. 모든 제품의 전체 수량 구하기</h5><p>제품의 전체 수량을 구하는 코드는 아래와 같이 작성할 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sum_total_quantity = <span class="function"><span class="keyword">function</span>(<span class="params">products</span>) </span>&#123; <span class="comment">// &lt;-- 제품의 전체 수량을 구하는 함수</span></div><div class="line">  <span class="keyword">return</span> _reduce(products, <span class="function"><span class="keyword">function</span>(<span class="params">tq, product</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> _reduce(product.sizes, <span class="function"><span class="keyword">function</span>(<span class="params">tq2, size</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> tq2 + size.quantity;</div><div class="line">    &#125;, tq);</div><div class="line">  &#125;, <span class="number">0</span>)</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> total_quantity = sum_total_quantity(products); <span class="comment">// &lt;-- 예제 데이터를 넣으면 전체 수량을 구할 수 있다.</span></div><div class="line"><span class="built_in">console</span>.log(total_quantity); <span class="comment">// 15</span></div></pre></td></tr></table></figure></p>
<p>코드를 살펴보자. 우선 코드에 등장하는 <code>_reduce</code> 함수는 돌림직한 데이터(Array, ArrayLike, Object)를 ‘줄여나가는(reduce)’ 함수다. underscore와 같은 라이브러리에선 <code>fold</code>라는 이름으로도 사용된다. 이와 같은 표현을 사용하면 <code>reduce</code> 함수는 데이터를 ‘접는(fold)’ 함수인 셈이다. </p>
<p>다시 위의 코드를 보면 가장 밖에 있는 함수가 <code>products</code>를 받을 준비를 하고 있다. 이 <code>products</code>는 <code>_reduce</code>에게 전달된다. <code>_reduce</code> 함수는 세개의 인사를 받는데, <strong>접을 데이터</strong>, <strong>어떻게 접을지 정의하는 함수</strong>, <strong>접을 때 사용할 초기값</strong>을 받는다. 여기서 <code>products</code>가 접을 데이터가 되고 두번째 함수가 어떻게 접을지를 정의하고 있다. 초기값으로는 <code>0</code>을 넘겼다. 그리고 넘겨진 값들로 인해 만들어진 결과를 리턴한다.</p>
<p>이때 어떻게 접을지 정의한 두번째 인자인 함수를 보면 다시 <code>_reduce</code>를 사용하고 있는 것을 알 수 있다. 같은 함수가 반복되니 헷갈린다. 하지만 데이터를 보면 그 이유가 드러난다. 우리가 원하는 값은 제품의 수량을 의미하는 <code>quantity</code>다. 그런데 값은 <code>sizes</code>라는 배열 안에 있기에 다시 한번 <code>_reduce</code>를 호출한 것이다. 다시 말해 두번째로 호출되는 <code>_reduce</code>는 <code>sizes</code> 배열 안의 값을 접어나가는 함수, 먼저 호출된 <code>_reduce</code>는 두번째에 의해 접힌 결과를 한번 더 접는 함수인 것이다.</p>
<p>두번째로 호출되는 <code>_reduce</code>를 다시 살펴보면 앞서 말한 것처럼 <code>sizes</code> 배열을 접을 데이터로 전달한다. 그리고 초기값에 <code>tq</code>를 전달하는데 이때 <code>tq</code>는 첫번째 <code>_reduce</code>가 전달한 <code>0</code>에 해당하는 값이다. 이 값은 <code>products</code> 배열을 돌면서 값이 계속 누적된다. 값이 쌓여가고 접혀가는 것이다. (이해가 되지 않는다면 우선 넘어간다.) 그리고 어떻게 접을지 정의한 함수에서 진짜 수량을 더한다. <code>tq2 + size.quantity</code> 이를 통해 값을 더해나가면 우리가 원하는 총 수량을 구할 수 있다.</p>
<p>위의 과정을 통해 만들어진 함수가 실제로 동작하는 것은 호출이 일어났을 때다. <code>var total_quantity = sum_total_quantity(products);</code>처럼 코드를 실행하고 그 결과를 변수에 저장해서 다시 로그 함수에 넘길 수 있지만 선언된 <code>sum_total_quantity</code> 함수를 <code>_go</code> 함수와 함께 사용하면 아래와 같은 코드가 된다. 별도의 변수 선언 없이 원하는 일을 할 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">_go(products, </div><div class="line">  sum_total_quantity, </div><div class="line">  <span class="built_in">console</span>.log); <span class="comment">// 15</span></div></pre></td></tr></table></figure></p>
<h5 id="2-선택된-제품의-전체-수량-구하기"><a href="#2-선택된-제품의-전체-수량-구하기" class="headerlink" title="2. 선택된 제품의 전체 수량 구하기"></a>2. 선택된 제품의 전체 수량 구하기</h5><p>선택된 제품들의 수량만을 구하는 코드는 아래와 같다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> selected_products = _filter(products, product =&gt; product.is_selected); <span class="comment">// &lt;-- 선택된 제품만 골라낸 데이터</span></div><div class="line"><span class="keyword">var</span> selected_products_total_quantity = sum_total_quantity(selected_products);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(selected_product_total_quantity); <span class="comment">// 11</span></div></pre></td></tr></table></figure></p>
<p>비교적 간단한 코드다. <code>_filter</code> 함수를 이용해서 우리가 필요한 데이터를 골라내고 있다. 이 함수는 말 그대로 원하는 데이터만을 ‘거르는’ 함수다. 두번째 인자로 전달된 함수는 거를 기준을 제시한다. 리턴값이 참이면 그 값은 <code>_filter</code> 필요한 데이터라는 의미가 된다. 위의 코드에서는 선택된 데이터만을 골라내고 있다. </p>
<p>마찬가지로 <code>_go</code> 함수를 사용하면 아래와 같이 표현할 수 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_go(products,</div><div class="line">  products =&gt; _filter(products, product =&gt; product.is_selected),</div><div class="line">  sum_total_quantity,</div><div class="line">  <span class="built_in">console</span>.log); <span class="comment">// 11</span></div></pre></td></tr></table></figure></p>
<h3 id="기본-함수-직접-구현하기"><a href="#기본-함수-직접-구현하기" class="headerlink" title="기본 함수 직접 구현하기"></a>기본 함수 직접 구현하기</h3><h5 id="1-each"><a href="#1-each" class="headerlink" title="1. _each"></a>1. <code>_each</code></h5><p><code>_each</code> 함수는 <code>for</code>와 같은 반복문을 대체하는 함수다. 오늘 만들 다른 함수들과 마찬가지로 돌림직한 데이터를 돌면서 어떤 동작을 한다. 다른 함수들이 부수효과를 지양하는 것에 반해 이 함수는 부수효과를 이용한다. 인자로 <strong>돌림직한 데이터</strong>와 <strong>돌면서 무엇을 할지 정의한 함수</strong>를 받는다. </p>
<p>사용의 예는 아래와 같다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">_each([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], num =&gt; <span class="built_in">console</span>.log(num)); <span class="comment">// &lt;-- 1부터 5까지 순서대로 로그가 남는다.</span></div></pre></td></tr></table></figure></p>
<p>실제 함수는 아래와 같이 구현되어 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_each</span>(<span class="params">list, iter</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(list)) &#123; <span class="comment">// &lt;-- 배열을 돌리기 위한 부분</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = list.length; i &lt; len; i++) </div><div class="line">      iter(list[i], i, list);</div><div class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">// &lt;-- 그 외의 객체를 돌리기 위한 부분</span></div><div class="line">    <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(list);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = keys.length; i &lt; len; i++) </div><div class="line">      iter(list[keys[i]], keys[i], list);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>코드를 살펴보면 <code>for</code> 구문으로 데이터를 순회하며 <code>iter</code>라고 정의한 보조 함수를 한번씩 실행시켜주고 있다. 배열과 객체를 구분해서 값을 찾고 보조 함수에 전달하는데 보조 함수에 전달하는 값은 <strong>순서대로 찾은 값</strong>, <strong>그 값의 인덱스(키)</strong>, <strong>원본 배열(객체)</strong>이다. 이렇게 전달된 인자들을 이용해 <code>_each</code> 함수를 보다 유연하게 사용할 수 있게 된다.</p>
<h5 id="2-map"><a href="#2-map" class="headerlink" title="2. _map"></a>2. <code>_map</code></h5><p><code>_map</code> 함수는 데이터를 돌면서 값을 매핑하고 새로운 배열을 리턴하는 함수다. 앞서 언급한 것처럼 부수효과를 지양한다. <code>_each</code>와 마찬가지로 인자로 <strong>돌림직한 데이터</strong>와 <strong>돌면서 무엇을 할지 정의한 함수</strong>를 받는다. 차이점은 받은 함수가 새로운 배열의 값을 정의한다는 점이다.</p>
<p>사용의 예는 아래와 같다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> result = _map([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>], num =&gt; num + <span class="number">10</span>);</div><div class="line"><span class="built_in">console</span>.log(result); <span class="comment">// [11, 12, 13, 14, 15]</span></div></pre></td></tr></table></figure></p>
<p>실제 함수는 아래와 같이 구현되어 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_map</span>(<span class="params">list, iter</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> res = [];</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(list)) &#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = list.length; i &lt; len; i++) </div><div class="line">      res[i] = iter(list[i], i, list);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(list);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = keys.length; i &lt; len; i++) </div><div class="line">      res[i] = iter(list[keys[i]], keys[i], list);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>_each</code> 함수와 다른 점은 <code>res</code>라는 결과값을 내부에서 정의하고 이를 반환한다는 것이다. 결과적으로 <code>_map</code>은 보조함수에 의해 정의된 값을 담은 새로운 배열을 리턴한다. </p>
<h5 id="3-filter"><a href="#3-filter" class="headerlink" title="3. _filter"></a>3. <code>_filter</code></h5><p>위에서 이미 살펴본 <code>_filter</code> 함수는 데이터를 거르는 함수다. 사실 <code>_each</code>를 제외한 모든 함수는 리턴값이 중요하다. 그 값을 전달함으로 다른 함수와 소통한다. </p>
<p>사용의 예는 이미 위에서 살펴보았으니 구현체만 살펴보자.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_filter</span>(<span class="params">list, predi</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> res = [];</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(list)) &#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = list.length; i &lt; len; i++) </div><div class="line">      <span class="keyword">if</span> (predi(list[i], i, list)) </div><div class="line">        res.push(list[i]);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(list);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = keys.length; i &lt; len; i++) </div><div class="line">      <span class="keyword">if</span> (predi(list[keys[i]], keys[i], list)) </div><div class="line">        res.push(list[keys[i]]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>_map</code>처럼 결과값 <code>res</code>를 갖지만 보조함수(<code>predi</code>)가 리턴한 값이 아닌 보조함수의 실행 결과가 참인 경우에만 값을 결과값에 담는다.</p>
<h5 id="4-reduce"><a href="#4-reduce" class="headerlink" title="4. _reduce"></a>4. <code>_reduce</code></h5><p>역시 이미 앞서 만나본 함수다. <code>_reduce</code>는 데이터를 접는 함수다. 다른 함수들과 달리 세개의 인자를 값으로 받는다.</p>
<p>미리 봤던 예제보다 단순한 예제를 살펴보고 구현으로 넘어가자.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> result = _reduce([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>], <span class="function"><span class="keyword">function</span>(<span class="params">memo, num</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> memo + num;</div><div class="line">&#125;, <span class="number">0</span>);</div><div class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 55</span></div></pre></td></tr></table></figure></p>
<p>세개의 인자를 전달 받았다. 첫번째 인자는 1부터 10까지를 담고 있는 배열이다. 이를 어떻게 처리할지 알고 있는 함수와 초기 값을 나머지 인자로 받았다. 예제에서 보조함수는 받은 값을 더하는 함수다. 결과적으로 <code>_reduce</code>는 1부터 10까지의 총합을 반환한다. </p>
<p>이를 구현한 코드는 아래와 같다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_reduce</span>(<span class="params">list, iter, memo</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(list)) &#123;</div><div class="line">    <span class="keyword">var</span> res = (memo != <span class="literal">undefined</span> ? memo : list[i++]); <span class="comment">// &lt;-- 남다른 결과값 선언부</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> len = list.length; i &lt; len; i++) </div><div class="line">      res = iter(res, list[i], i, list);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(list), res = (memo != <span class="literal">undefined</span> ? memo : list[keys[i++]]);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> len = keys.length; i &lt; len; i++) </div><div class="line">      res = iter(res, list[keys[i]], keys[i], list);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>결과값 <code>res</code>를 선언하는 부분이 조금 남다르다. 앞선 <code>_map</code>, <code>_filter</code>가 배열을 리턴했던 것과 달리 <code>_reduce</code>는 결과값의 데이터형이 호출 당시에 결정된다. 코드에서 <code>memo</code>에 해당하는 변수가 바로 초기값이다. 결과값은 초기값의 데이터형에 의해 정해지기 때문에 <code>res</code>를 선언하는 과정에서 <code>memo</code>가 데이터를 가지고 있는지를 검사한다. <code>!=</code>로 검사하여 <code>null</code> 혹은 <code>undefined</code>인 경우 호출 당시 초기값이 전달되지 않은 것으로 판단하고 <code>list</code>의 첫번째 값을 초기값으로 사용한다. </p>
<p>이후에 다른 함수들과 마찬가지로 반복문을 수행한다. 이때 보조함수 <code>iter</code>가 리턴하는 값을 결과값에 덮어씌운다. <code>list</code>의 마지막 값을 가지고 보조함수가 수행한 결과가 최종 결과값이 된다.</p>
<h5 id="5-go"><a href="#5-go" class="headerlink" title="5. _go"></a>5. <code>_go</code></h5><p><code>_go</code> 함수는 파이프라인 코딩이 가능하도록 돕는 함수다. 클로저(Clojure)에서의 <code>-&gt;&gt;</code> 연산자나 엘릭서(Elixir)에서의 <code>|&gt;</code> 연산자와 같은 역할을 한다. 첫번째로 받은 인자(데이터)를 두번째로 받은 인자(함수)에 넘긴다. 두번째 함수가 리턴하는 값을 다시 세번째 인자(함수)로 넘긴다. 예시를 한번 더 살펴보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_go([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],</div><div class="line">  arr =&gt; _filter(arr, num =&gt; num % <span class="number">2</span>), <span class="comment">// &lt;-- 홀수 값만을 갖는 배열을 리턴한다.</span></div><div class="line">  arr =&gt; _reduce(arr, (total, num) =&gt; total + num), <span class="comment">// [1, 3, 5, 7, 9]을 더하여 리턴한다.</span></div><div class="line">  <span class="built_in">console</span>.log); <span class="comment">// 25</span></div></pre></td></tr></table></figure>
<p>코드는 아래와 같이 구현되어 있다.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> slice = <span class="built_in">Array</span>.prototype.slice;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_go</span>(<span class="params">seed</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> fns = slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>);</div><div class="line">  <span class="keyword">return</span> _reduce(fns, (se, fn) =&gt; fn(se), seed);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>짧은 코드지만 재미난 구석이 많은 코드다. 살펴보자. 우선 <code>slice</code>를 사용해서 <code>arguments</code> 객체를 배열로 만들어준다. 첫번째 인자인 <code>seed</code>를 제외한 나머지들을 모두 <code>fns</code>라는 변수에 선언하는데 첫번째 인자를 제외한 모든 인자가 함수일 것이기 때문이다. 이제 이 함수들을 순서대로 실행시켜나가면 된다. 그런데 뜬금없이 <code>_reduce</code>가 등장한다. 잠깐 생각해보자.</p>
<p><code>_go</code>는 첫번째 인자로 들어온 <strong>데이터를 여러 함수들에 통과시키며 리턴값을 만들어가는 함수</strong>다. 데이터를 변형해서 무엇으로 만들어가는 함수는 이미 하나 있었다. 데이터를 접는 함수라고 소개했던 <code>_reduce</code>가 그런 역할을 한다. <strong>초기값의 데이터형</strong>을 기준으로 <strong>돌림직한 데이터</strong>를 돌면서 데이터를 접어나간다. 우리는 이미 돌림직한 데이터인 <code>fns</code>(배열)와 초기값인 <code>seed</code>를 가지고 있다. 이제 필요한건 오직 <strong>어떻게 접어나갈지 정의하는 함수</strong>뿐이다. 그렇다. 이게 바로 <code>_reduce</code>가 사용된 이유다. 이렇게 이미 정의된 함수 덕에 보다 쉽게 새로운 함수를 만들 수 있다. 이제 어떻게 접어나갈지 살펴보자.</p>
<p>우리는 <code>fns</code>가 갖고 있는 함수들의 실행 결과가 필요하다. 이 작업을 단지 <code>(se, fn) =&gt; fn(se)</code>라고 정의함으로 해결할 수 있다. 이미 정의된 어떤 함수 덕분이다. 여기서 <code>se</code>는 처음에는 <code>seed</code>와 같은 값이었다가 이후에는 <code>fn</code>의 리턴값이 될 것이다. <code>fn</code>은 <code>_reduce</code>의 내부에서 반복문으로 배열(<code>fns</code>)을 돌며 계속해서 다음 값을 넘겨서 받게 되는 함수다. </p>
<h3 id="문제-풀어보기"><a href="#문제-풀어보기" class="headerlink" title="문제 풀어보기"></a>문제 풀어보기</h3><p>끝으로 앞서 소개된 ‘함수형 실전 코드 예제’와 유사한 예제를 풀어보자. 데이터는 <code>products</code>라는 변수에 선언되어 있다. (‘검사’ 창에서 풀어볼 수 있다.) </p>
<h5 id="1-모든-제품의-총-가격"><a href="#1-모든-제품의-총-가격" class="headerlink" title="1. 모든 제품의 총 가격"></a>1. 모든 제품의 총 가격</h5><h5 id="2-선택된-제품의-총-가격"><a href="#2-선택된-제품의-총-가격" class="headerlink" title="2. 선택된 제품의 총 가격"></a>2. 선택된 제품의 총 가격</h5><hr>
<h3 id="전체-스터디-일정"><a href="#전체-스터디-일정" class="headerlink" title="전체 스터디 일정"></a>전체 스터디 일정</h3><h5 id="1주차-기본-함수-구현하고-사용하기"><a href="#1주차-기본-함수-구현하고-사용하기" class="headerlink" title="1주차 | 기본 함수 구현하고 사용하기"></a>1주차 | 기본 함수 구현하고 사용하기</h5><h5 id="2주차-고차-함수와-커링-currying"><a href="#2주차-고차-함수와-커링-currying" class="headerlink" title="2주차 | 고차 함수와 커링(currying)"></a>2주차 | <a href="/programming/functional-js-study-1/">고차 함수와 커링(currying)</a></h5><h5 id="3주차-함수형-자바스크립트-라이브러리"><a href="#3주차-함수형-자바스크립트-라이브러리" class="headerlink" title="3주차 | 함수형 자바스크립트 라이브러리"></a>3주차 | <a href="/programming/functional-js-study-2/">함수형 자바스크립트 라이브러리</a></h5><h5 id="4주차-Movie-Box-1-필터링-정렬"><a href="#4주차-Movie-Box-1-필터링-정렬" class="headerlink" title="4주차 | Movie Box 1 - 필터링, 정렬"></a>4주차 | <a href="/programming/functional-js-study-3/">Movie Box 1 - 필터링, 정렬</a></h5><h5 id="5주차-Movie-Box-2-필터링-정렬-복습"><a href="#5주차-Movie-Box-2-필터링-정렬-복습" class="headerlink" title="5주차 | Movie Box 2 - 필터링, 정렬 복습"></a><em>5주차 | Movie Box 2 - 필터링, 정렬 복습</em></h5><h5 id="6주차-Movie-Box-3-지연평가-L-memoize"><a href="#6주차-Movie-Box-3-지연평가-L-memoize" class="headerlink" title="6주차 | Movie Box 3 - 지연평가 L, memoize"></a><em>6주차 | Movie Box 3 - 지연평가 L, memoize</em></h5><h5 id="7주차-Movie-Box-4-비동기-상황-다루기"><a href="#7주차-Movie-Box-4-비동기-상황-다루기" class="headerlink" title="7주차 | Movie Box 4 - 비동기 상황 다루기"></a><em>7주차 | Movie Box 4 - 비동기 상황 다루기</em></h5><p><a href="https://github.com/joeunha/functional-js-study/tree/master/01_week" target="_blank" rel="external">예제 코드</a></p>
<script src="/js/functional.js"></script>
<script async>
var products = [
  {
    is_selected: true, // <--- 장바구니에서 체크 박스 선택
    name: "반팔티",
    price: 10000, // <--- 기본 가격
    sizes: [ // <---- 장바구니에 담은 동일 상품의 사이즈 별 수량과 가격
      { name: "L", quantity: 2, price: 0 },
      { name: "XL", quantity: 3, price: 0 },
      { name: "2XL", quantity: 2, price: 2000 }, // <-- 옵션의 추가 가격
    ]
  },
  {
    is_selected: true,
    name: "후드티",
    price: 21000,
    sizes: [
      { name: "L", quantity: 3, price: -1000 },
      { name: "2XL", quantity: 1, price: 2000 },
    ]
  },
  {
    is_selected: false,
    name: "맨투맨",
    price: 16000,
    sizes: [
      { name: "L", quantity: 4, price: 0 }
    ]
  }
];

if (location.pathname === '/2017/10/17/functional-js-study/')
  console.log(`
  [문제 풀어보기]
    0. 데이터 변수 이름: products
    1. 모든 제품의 총 가격
    2. 선택된 제품의 총 가격 
  `)
</script>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/functional-js-study/" data-id="cjajb82fx000no0vgg1pomws9" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/functional-js-study/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/each/">each</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/filter/">filter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/map/">map</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/reduce/">reduce</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/스터디/">스터디</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/자바스크립트/">자바스크립트</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-자바스크립트/">함수형 자바스크립트</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-프로그래밍/">함수형 프로그래밍</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-make-bingo-game-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/make-bingo-game-1/" class="article-date">
  <time datetime="2017-07-26T04:55:31.000Z" itemprop="datePublished">2017-07-26</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/make-bingo-game-1/">[미니게임] 코드 - BINGO</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>(의식의 흐름대로) 미니 게임을 만들어보자!</em></p>
<h2 id="BINGO-2-View"><a href="#BINGO-2-View" class="headerlink" title="BINGO[2] - View"></a>BINGO[2] - View</h2><p>숫자 데이터(배열)를 만들어서 DOM에 그리기까지</p>
<h3 id="빙고판-데이터-만들기"><a href="#빙고판-데이터-만들기" class="headerlink" title="빙고판 데이터 만들기"></a>빙고판 데이터 만들기</h3><p>75개의 숫자(1~75) 중에서 25개의 숫자를 임의로 선택해서 5x5 크기의 판을 만들어보자.</p>
<h4 id="1부터-75까지-담고-있는-배열을-만든다"><a href="#1부터-75까지-담고-있는-배열을-만든다" class="headerlink" title="1부터 75까지 담고 있는 배열을 만든다."></a>1부터 75까지 담고 있는 배열을 만든다.</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> base_arr = [], i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> (++i &lt; <span class="number">76</span>) base_arr.push(i);</div><div class="line"></div><div class="line"><span class="comment">// Partial.js의 함수들을 사용하면 아래와 같이 할 수 있다.</span></div><div class="line"><span class="comment">// var base_arr = _.go(76, _.range, _.rest);</span></div></pre></td></tr></table></figure>
<h4 id="빙고판을-만들어줄-함수를-만든다"><a href="#빙고판을-만들어줄-함수를-만든다" class="headerlink" title="빙고판을 만들어줄 함수를 만든다."></a>빙고판을 만들어줄 함수를 만든다.</h4><p>다섯개의 배열(B, I, N, G, O 에 해당하는 배열)을 값으로 갖는 배열을 만들어야 하는데, 이때 숫자들은 15개씩 각 배열에 속해야 함으로 적절한 위치를 찾아주는 함수가 필요하다. (물론 순서대로 넣어주면 되지만 랜덤한 숫자일 필요가 있기 때문에 위치를 찾아주는 수고가 필요하다.)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">find_idx</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> i = <span class="number">4</span>;</div><div class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">15</span>) i = <span class="number">0</span>;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n &lt;= <span class="number">30</span>) i = <span class="number">1</span>;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n &lt;= <span class="number">45</span>) i = <span class="number">2</span>;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n &lt;= <span class="number">60</span>) i = <span class="number">3</span>;</div><div class="line">  <span class="keyword">return</span> i;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>위의 함수를 이용해서 다섯개의 배열을 값으로 갖는 배열을 만드는 함수를 만든다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_bingo</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">o, n</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = find_idx(n);</div><div class="line">    <span class="keyword">return</span> o[i].push(n), o;</div><div class="line">    &#125;, [[],[],[],[],[]])</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Partial.js의 함수는 커링을 지원한다. </span></div><div class="line"><span class="comment">// 첫번째 인자를 제외한 인자가 들어오면 동작할 준비가 된 함수를 반환한다.</span></div><div class="line"><span class="comment">// var make_bingo2 = _.reduce(</span></div><div class="line"><span class="comment">//  (o, n) =&gt; &#123;</span></div><div class="line"><span class="comment">//     var i = find_idx(n);</span></div><div class="line"><span class="comment">//     return o[i] = o[i].concat(n), o;</span></div><div class="line"><span class="comment">//     &#125;, [[],[],[],[],[]]);</span></div></pre></td></tr></table></figure>
<h4 id="상황판에-해당하는-배열과-빙고판에-해당하는-배열을-만드는-함수를-만든다"><a href="#상황판에-해당하는-배열과-빙고판에-해당하는-배열을-만드는-함수를-만든다" class="headerlink" title="상황판에 해당하는 배열과 빙고판에 해당하는 배열을 만드는 함수를 만든다."></a>상황판에 해당하는 배열과 빙고판에 해당하는 배열을 만드는 함수를 만든다.</h4><p>사실 위의 <code>make_bingo</code>는 5x5의 빙고판을 만들어주지 않는다. 길이가 15인 배열 5개를 가진 배열을 만들 뿐이다. 이렇게 만들어진 판은 게임에 참가하는 유저에게 주어지는 판이 아니라 게임 진행 상황을 확인할 수 있는 상황판이 된다. 이제 실제 유저가 사용할 수 있는 진짜 5x5 빙고판을 만들어보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_user_data</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> rand_arr = _.shuffle(arr);</div><div class="line">  <span class="keyword">return</span> make_bingo(rand_arr);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> result = make_user_data(base_arr);</div><div class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]); <span class="comment">// 순서가 섞인 배열 (B의 범위에 속하는 배열)</span></div><div class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>].length); <span class="comment">// 15</span></div></pre></td></tr></table></figure>
<p><code>_.shuffle</code> 함수 덕분에 순서가 섞인 배열을 얻게 되었지만 여전히 배열이 너무 길다. 줄여보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">reduce_first_5</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">l, v, i</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> l[i] = _.first(v, <span class="number">5</span>), l;</div><div class="line">  &#125;, [])</div><div class="line">&#125; <span class="comment">// var reduce_first_5 = _.reduce((l, v, i) =&gt; (l[i] = _.first(v, 5), l), []);</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_user_data</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> rand_arr = _.shuffle(arr);</div><div class="line">  <span class="keyword">return</span> reduce_first_5(make_bingo(rand_arr));</div><div class="line">&#125; <span class="comment">// var make_user_data = _.pipe(_.shuffle, make_bingo, reduce_first_5);</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> user_data = make_user_data(base_arr);</div><div class="line"><span class="built_in">console</span>.log(user_data[<span class="number">0</span>]); <span class="comment">// 순서가 섞인 배열 (B의 범위에 속하는 배열)</span></div><div class="line"><span class="built_in">console</span>.log(user_data[<span class="number">0</span>].length); <span class="comment">// 5</span></div></pre></td></tr></table></figure>
<p><code>result</code>는 5개의 배열을 갖는 배열이며 각 배열의 길이는 5이다. 그리고 각 배열은 임의의 순서가 섞여 있다. 이 상태를 5x5 빙고판의 데이터라고 보자. (`make_user_data``라는 함수를 이용하면 매번 새로운 빙고판 데이터를 만들 수 있다.)</p>
<h3 id="데이터를-이용해서-빙고판-그리기"><a href="#데이터를-이용해서-빙고판-그리기" class="headerlink" title="데이터를 이용해서 빙고판 그리기"></a>데이터를 이용해서 빙고판 그리기</h3><p>결국 게임을 진행하려면 DOM에 만든 배열을 그려야하는데, 어떻게 그려야할까. 우선 그려질 숫자를 적어 넣을 판을 먼저 만들어야 한다.</p>
<h4 id="html-table-태그-문자열을-만든다"><a href="#html-table-태그-문자열을-만든다" class="headerlink" title="html table 태그 문자열을 만든다."></a>html table 태그 문자열을 만든다.</h4><p>DOM에 그려질 html 태그를 괄호까지 직접 타이핑하는 것은 너무 번거로운 일이다. 그래서 대부분은 <a href="https://pugjs.org/api/getting-started.html" target="_blank" rel="external">pug</a>, <a href="http://www.embeddedjs.com/" target="_blank" rel="external">ejs</a>, <a href="http://handlebarsjs.com/" target="_blank" rel="external">handlebars</a> 같은 템플릿 엔진을 사용한다. 이와 같은 도구는 값에 따라 다른 태그를 유동적으로 작성해야할 때 매우 유용한데, Partial.js에서는 <code>_.template</code> 함수가 이와 같은 일을 한다. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> table_template = _.template(<span class="string">'data'</span>, <span class="string">`</span></div><div class="line">        table </div><div class="line">          tr</div><div class="line">            th B</div><div class="line">            th I</div><div class="line">            th N</div><div class="line">            th G</div><div class="line">            th O &#123;&#123; _.go(data, `, _.template.each(<span class="string">'d1'</span>, <span class="string">`</span></div><div class="line">          tr &#123;&#123; _.go(d1, `, _.template.each(<span class="string">'d2'</span>,<span class="string">`</span></div><div class="line">            td &#123;&#123;d2&#125;&#125;</div><div class="line">          `),<span class="string">`)&#125;&#125;`</span>),</div><div class="line">        <span class="string">`)&#125;&#125;</span></div><div class="line">      `);</div><div class="line"></div><div class="line">table_template(user_board);</div><div class="line"><span class="comment">/* 출력 결과</span></div><div class="line">"&lt;table &gt;&lt;tr &gt;&lt;th &gt;B&lt;/th&gt;&lt;th &gt;I&lt;/th&gt;&lt;th &gt;N&lt;/th&gt;&lt;th &gt;G&lt;/th&gt;&lt;th &gt;O &lt;tr &gt;&lt;td &gt;10&lt;/td&gt;&lt;td &gt;7&lt;/td&gt;&lt;td &gt;5&lt;/td&gt;&lt;td &gt;4&lt;/td&gt;&lt;td &gt;8&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td &gt;28&lt;/td&gt;&lt;td &gt;20&lt;/td&gt;&lt;td &gt;30&lt;/td&gt;&lt;td &gt;16&lt;/td&gt;&lt;td &gt;26&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td &gt;33&lt;/td&gt;&lt;td &gt;41&lt;/td&gt;&lt;td &gt;45&lt;/td&gt;&lt;td &gt;42&lt;/td&gt;&lt;td &gt;32&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td &gt;47&lt;/td&gt;&lt;td &gt;59&lt;/td&gt;&lt;td &gt;50&lt;/td&gt;&lt;td &gt;51&lt;/td&gt;&lt;td &gt;52&lt;/td&gt;&lt;/tr&gt;&lt;tr &gt;&lt;td &gt;65&lt;/td&gt;&lt;td &gt;67&lt;/td&gt;&lt;td &gt;68&lt;/td&gt;&lt;td &gt;69&lt;/td&gt;&lt;td &gt;63&lt;/td&gt;&lt;/tr&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/table&gt;"</div><div class="line">*/</div></pre></td></tr></table></figure>
<p><code>_.template(data_name, template_structure)</code> 함수는 두개의 인자를 받아서 함수를 반환한다. 이 함수는 데이터를 받아 html 태그 문자열을 만든다. 처음에 <code>_.template</code> 함수가 받는 두개의 인자는 각각 태그를 그릴 때 사용할 ‘데이터의 이름’과 ‘템플릿의 구조’를 받는다. 데이터의 이름은 템플릿의 구조에서 <code>&#123;&#123;&#125;&#125;</code> 안에서 그려질 태그 문자열에 반영될 데이터의 이름이다. 템플릿 구조 안에서 이중 중괄호 안은 자바스크립트의 영역이다. 자세한 내용은 <a href="https://marpple.github.io/partial.js/#함수-스타일의-템플릿-함수" target="_blank" rel="external">Partial.js의 문서</a>를 참고하면 된다.</p>
<p>참고: <code>_.template.each</code> 함수는 템플릿을 반복적으로 그려야할 때 사용한다. 템플릿의 구조를 정의하기 위해 사용된 역따옴표는 ES6부터 개행이 포함된 문자열을 담을때 사용한다. ES5에서는 개행 전에 역슬래시가 포함되어야 한다.</p>
<h4 id="필요한-함수를-조립한다"><a href="#필요한-함수를-조립한다" class="headerlink" title="필요한 함수를 조립한다."></a>필요한 함수를 조립한다.</h4><p>DOM에 그려질 View를 만들기 위한 작업은 어느정도 되었다. 이제 함수를 조립해서 실제로 사용할 함수를 만들자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> make_bingo_table = _.pipe(_.unzip, table_template, D.el);</div><div class="line"></div><div class="line"><span class="keyword">var</span> make_user_board = _.pipe(make_user_data, make_bingo_table, D.appendTo(<span class="string">'.user_board'</span>));</div><div class="line"></div><div class="line"><span class="keyword">var</span> make_admin_board = _.pipe(make_bingo, make_bingo_table, D.appendTo(<span class="string">'.admin_board'</span>));</div></pre></td></tr></table></figure>
<p>세개의 함수가 준비되었다. <code>make_user_board(base_arr)</code>의 형태로 사용하면 user_board를 클래스로 갖는 DOM 엘리먼트에 기대했던 빙고판이 붙는다. 여기서 사용된 <code>D</code>를 네임스페이스로 갖는 함수는 <a href="https://rawgit.com/joeunha/bingo/master/docs/js/don.js" target="_blank" rel="external">Don.js</a>라는 라이브러리가 가진 함수들이다. 사용법은 jQuery와 같은데 메서드로 사용하지 않고 함수로 사용한다는 점만 다르다. 덕분에 더욱 우아한 함수형 코드가 작성 가능하다. </p>
<h3 id="맺음"><a href="#맺음" class="headerlink" title="맺음"></a>맺음</h3><p>전체 코드는 아래와 같다. 다음 글에서 Control 부분을 완성할 예정이다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> base_arr = [], i = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">while</span> (++i &lt; <span class="number">76</span>) base_arr.push(i);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">find_idx</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> i = <span class="number">4</span>;</div><div class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">15</span>) i = <span class="number">0</span>;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n &lt;= <span class="number">30</span>) i = <span class="number">1</span>;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n &lt;= <span class="number">45</span>) i = <span class="number">2</span>;</div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (n &lt;= <span class="number">60</span>) i = <span class="number">3</span>;</div><div class="line">  <span class="keyword">return</span> i;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_bingo</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">o, n</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = find_idx(n);</div><div class="line">    <span class="keyword">return</span> o[i].push(n), o;</div><div class="line">  &#125;, [[],[],[],[],[]])</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">reduce_first_5</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">l, v, i</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> l[i] = _.first(v, <span class="number">5</span>), l;</div><div class="line">  &#125;, [])</div><div class="line">&#125; <span class="comment">// var reduce_first_5 = _.reduce((l, v, i) =&gt; (l[i] = _.first(v, 5), l), []);</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_user_data</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> rand_arr = _.shuffle(arr);</div><div class="line">  <span class="keyword">return</span> reduce_first_5(make_bingo(rand_arr));</div><div class="line">&#125; <span class="comment">// var make_user_board = _.pipe(_.shuffle, make_bingo, reduce_first_5);</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> table_template = _.template(<span class="string">'data'</span>, <span class="string">`</span></div><div class="line">    table</div><div class="line">      tr</div><div class="line">        th B</div><div class="line">        th I</div><div class="line">        th N</div><div class="line">        th G</div><div class="line">        th O &#123;&#123; _.go(data, `, _.template.each(<span class="string">'d1'</span>, <span class="string">`</span></div><div class="line">      tr &#123;&#123; _.go(d1, `, _.template.each(<span class="string">'d2'</span>,<span class="string">`</span></div><div class="line">        td &#123;&#123;d2&#125;&#125;</div><div class="line">      `),<span class="string">`)&#125;&#125;`</span>),</div><div class="line">  <span class="string">`)&#125;&#125;</span></div><div class="line">  `);</div><div class="line"></div><div class="line"><span class="keyword">var</span> make_bingo_table = _.pipe(_.unzip, table_template, D.el);</div><div class="line"></div><div class="line"><span class="keyword">var</span> make_user_board = _.pipe(make_user_data, make_bingo_table, D.appendTo(<span class="string">'.user_board'</span>));</div><div class="line"></div><div class="line"><span class="keyword">var</span> make_admin_board = _.pipe(make_bingo, make_bingo_table, D.appendTo(<span class="string">'.admin_board'</span>));</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/make-bingo-game-1/" data-id="cjajb82i2002vo0vg7mcsmir4" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/make-bingo-game-1/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bingo/">bingo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/만들기/">만들기</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/미니게임/">미니게임</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/빙고/">빙고</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-1-year-anniversary" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/view-of-value/1-year-anniversary/" class="article-date">
  <time datetime="2017-07-17T14:11:11.000Z" itemprop="datePublished">2017-07-17</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/view-of-value/">view of value</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/view-of-value/1-year-anniversary/">[회고] 벌써 일년</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>지난 1년을 되돌아보자</em></p>
<h2 id="입사"><a href="#입사" class="headerlink" title="입사"></a>입사</h2><p>작년 7월 17일에 마켓프레스에 첫 출근을 했다. 입사하게 된 과정은 지금 생각해봐도 놀랍고 신기하다. 첫 출근보다 약 2개월 전인 5월 13일, 뜬금없이 받은 메일 한 통이 날아왔다. 팀장님이었다. 간단한 자기소개와 함께 이런 말을 남겼다. “<em>꼭 만나보고 싶군요! 왜냐면 하조은님이 꼭 만나고 싶은 회사고 꼭 만나고 싶은 사람일 겁니다. ^^b</em>“ 지금 생각해봐도 참 황당한 메일이다. 헛웃음이 나온다. (지금은 팀장님이 가졌던 자신감의 이유를 알고 있다.) 다짜고짜 내가 만나고 싶을 회사라고 주장하는 사람으로부터 메일을 받았으니 황당했을 법하다. 그런데 나는 또 15분만에 답장을 했고 몇 차례 메일을 주고받은 뒤 나는 곧장 서울로 향했다. 그리고 다시 포항으로 내려가는 길, 나는 그렇게 첫 메일을 받고 92시간 만에 마켓프레스에서 일하기로 했다. 정작 첫 출근에 2개월 남짓 걸린 이유는 졸업을 위해 이수해야 하는 수업이 있었기 때문이다.</p>
<h2 id="공부"><a href="#공부" class="headerlink" title="공부"></a>공부</h2><p>졸업 이후에 나는 더 많은 공부를 하게 된 것 같다. 컴퓨터 공학을 전공한 것이 분명한데 모르는 것이 너무 많았다. 특히나 웹에 관해서는 거의 무지했다. 웹 서비스를 개발하는 회사에 입사했으니 웹을 공부해야 했고 그에 맞춰 필요한 언어도 공부해야 했다. 자바스크립트(JavaScript)였다. 그때까지만 해도 나의 주 언어는 C였다. 자바를 배운 적도 있고 C++도 배웠지만, 첫 언어인 C만큼 잘하진 못했다. C도 나름대로 잘하는 편이었는데, 자바스크립트는 전혀 다른 느낌이었다. 처음부터 배웠다. 이전에 공부해본답시고 사둔 책들과 회사에 있는 책을 모두 읽었다. 코뿔소 책으로 알려진 <a href="http://book.naver.com/bookdb/book_detail.nhn?bid=4561033" target="_blank" rel="external">자바스크립트 완벽 가이드</a>, 더글라스 크락포드의 <a href="http://book.naver.com/bookdb/book_detail.nhn?bid=4774270" target="_blank" rel="external">자바스크립트 핵심 가이드</a>, 만인의 모니터 받침대인 노란책 <a href="http://book.naver.com/bookdb/book_detail.nhn?bid=7204207" target="_blank" rel="external">프론트엔드 개발자를 위한 자바스크립트 프로그래밍</a>, 존 레식 형님의 <a href="http://book.naver.com/bookdb/book_detail.nhn?bid=7466145" target="_blank" rel="external">자바스크립트 닌자 비급</a> 등을 섭렵했다. 책을 읽으면서 코드를 직접 타이핑하고 요약했다. 그 내용을 <a href="https://github.com/joeunha/TIL" target="_blank" rel="external">Today I Learned(TIL)</a>과 <a href="https://github.com/joeunha/javascript-jedi" target="_blank" rel="external">Javascript Jedi</a>에 정리했다. 100일간 일일 커밋도 했다. 그렇게 자바스크립트가 익숙해지기 시작했다.</p>
<h2 id="실전"><a href="#실전" class="headerlink" title="실전"></a>실전</h2><p>처음으로 동료(지금은 떠나버린 동료)와 함께 짝코딩(<a href="https://en.wikipedia.org/wiki/Pair_programming" target="_blank" rel="external">페어 프로그래밍 - Pair Programming</a>)을 했던 코드는 어디로 갔는지 모르겠다. github이 아닌 bitbucket에 프라이빗 저장소를 이용했는데 연습용 프로젝트였던 것 같다. 다른 사람 앞에서 코드를 짜는게 낯설었던 시기라 오타도 많이 났었다. (물론 지금도 팀장님이나 다른 고수분들 앞에서 코드를 짜려면 버벅거린다.) 그때 처음으로 누군가와 함께 코딩하는 것이 얼마나 유익한지 알게 되었던 것 같다. 그래서 이후에 대학교 친구들과도 그런 시간을 가져보려고 했지만 정작 자신의 일이 아니고, 주 사용 언어도 다르니 쉽지 않은 일이라는 것을 알게 되었다. 그래도 그 친구들과 한동안 ES6를 함께 공부했었다. 여하튼 실제로 무언가를 만드는 과정에서 공부라는 게 읽고 요약하는 것의 한계와 실행해보는 것의 이점을 다시금 깨달았다. 한 줄을 적더라도 내가 생각해낸 논리로 코드를 짜보는 게 가장 효과적인 학습이었다. </p>
<p>종종 팀장님과 함께 코드를 짜는 일도 있었는데, 처음엔 몹시 버거웠다. 팀장님은 우아한 코드를 지향하시는데 내가 느끼기에 우아한 코드란 문법적으로 창의적이며, 논리적으로 깔끔하고, 짧은 코드를 의미했다. 당시 나에게 창의성과 논리적 탁월함은 없었고 짧은 코드는 가능했지만, 코드가 짧은 만큼 기능도 짧아서 쓸모없는 코드가 되어버리곤 했다. 결국 <code>if</code>와 <code>for</code>문의 향연이 될 수밖에 없었고 그 코드는 우아한 코드가 아니었다. 팀장님을 비롯한 팀의 선배들은 삼항 연산자를 즐겨 썼는데, 당시에 나는 그게 나쁜 습관이라고 생각했다. 학교에서 배운 바대로라면 읽기 쉬운 코드가 좋은 코드인데 삼항 연산자는 읽기가 너무 어려웠기 때문이다! 그런데 지금은 삼항 연산자가 없는 코드는 상상할 수도 없다. (삼항 연산자는 코드를 훨씬 짧게 만들어줄 뿐만 아니라 어디서나 사용 할 수 있기에 더 창의적인 표현이 가능한 사랑스러운 연산자가 아닐 수 없다) 물론 지금도 팀장님의 코드는 한 번에 따라가기 어렵다. 하지만 시간이 지나면 상당 부분 이해할 수 있으며, 요즘은 가끔 혼자서도 우아한 코드를 짤 수 있게 되었다. 우아한 코드를 짜고 나면 흥분해서 혼자 “훌륭해”라며 감탄하는 날이 잦아지고 있다.</p>
<h2 id="오픈소스"><a href="#오픈소스" class="headerlink" title="오픈소스"></a>오픈소스</h2><p>우리 팀은 함수형 프로그래밍을 지향한다. 때문에 함수형 라이브러리를 사용하는데, <strong><a href="https://github.com/marpple/partial.js" target="_blank" rel="external">Partial.js</a></strong>라는 자체 제작 라이브러리를 사용한다. 이를 제작하는 과정에 나도 참여할 수 있었다. 이 전에는 팀에서 <a href="https://github.com/joeunha/abc-functional-javascript" target="_blank" rel="external">abc.js</a>라는 라이브러리를 만들기도 했는데, 이 라이브러리가 발전한 형태가 <strong>Partial.js</strong>다. 오픈소스로 공개해서 작업하다보니 많은 배움이 있었다. 특별히 문서 페이지를 만드는 작업을 도맡아서 했는데, 처음에는 정적 페이지를 처음부터 끝까지 다 구현하느라 정말 많이 배울 수 있었다. 특별히 코드 하이라이트 기능을 지원하는 <a href="https://codemirror.net/" target="_blank" rel="external">codemirror</a>를 사용해서 <a href="http://joeun.me/abc-docs/">abc.js의 문서 페이지</a>를 만들었었다. 이후에 Partial 프로젝트가 시작되면서 <a href="http://joeun.me/partial-docs/">partial.js의 문서 페이지</a>도 만들었는데, 코드 실행까지 가능한 나름 제법 완성도 있는 문서 페이지였다. 하지만 단순한 HTML, CSS로 구성된 정적 페이지는 관리가 용이하지 않았기에 최종적으로 <a href="https://marpple.github.io/partial.js/" target="_blank" rel="external">Partial 프로젝트의 페이지</a>는 <a href="https://hexo.io/" target="_blank" rel="external">hexo</a> 라는 오픈소스를 이용했다. 덕분에 마크다운 문법으로 문서를 작성하고 편집할 수 있었다. hexo의 기본 테마를 바탕으로 상당 부분을 뜯어고쳐서 지금의 페이지를 만들었다. 그리고 요즘 우리 팀은 <strong>don.js</strong> 라는 함수형 jQuery를 만들어 달러 <code>$</code>를 뺏어오려고 하고 있다. (Partial은 언더스코어 <code>_</code>를 네임스페이스로 쓰고 있다.)</p>
<p>팀에서 직접 오픈소스를 만들다보니 다른 사람들의 코드를 구경할 일도 잦았다. <a href="http://underscorejs.org/" target="_blank" rel="external">underscore.js</a>나 <a href="http://jquery.com/" target="_blank" rel="external">jQuery</a>가 대표적이다. <a href="https://github.com/marpple/partial.py" target="_blank" rel="external">Partial의 파이썬 버전</a>을 구현하면서 살펴본 <a href="https://github.com/serkanyersen/underscore.py" target="_blank" rel="external">underscore.py</a>도 있다. 뒤의 두개는 객체지향적으로 구현되어 있는데 함수형과의 차이를 알 수 있었다. 코드로서의 오픈소스 뿐만 아니라 문서로서의 오픈소스에도 자주 접근했는데, 그중에 하나가 <a href="https://github.com/DjangoGirls/tutorial" target="_blank" rel="external">DjangoGirls 튜토리얼</a>이었다. 이 문서에는 풀리퀘스트를 날리기도 했다. 한글 문서에 문법나 띄어쓰기 오타를 고쳤다. 그리고 최근에는 don.js를 만들며 살펴보다가 <a href="https://github.com/oneuijs/You-Dont-Need-jQuery" target="_blank" rel="external">You Don’t Need jQuery</a>에도 관여했다. (며칠보다가 알게된 점은 제이쿼리가 필요하지 않다고 말하기에는 이 문서가 충분하지 않다는 점이다.) 요즘은 이렇게 문서와 간단한 코드에 자주 접근하다보니 뭔가 글로벌한 개발자가 된 기분이다. (오늘은 제이쿼리에도 뭔가 문제가 있는 것 같아서 풀리퀘스트를 날렸는데, 10분도 안 돼서 리젝을 당하면서 글로벌한 개발자에 더욱 가까워졌다.)</p>
<h2 id="맺음"><a href="#맺음" class="headerlink" title="맺음"></a>맺음</h2><p>글을 맺어야겠다. 7월 17일 11시 20분쯤 글을 적기 시작했는데, 적다 보니 12시 30분이 지났다. 지난 1년 간의 변화는 앞으로 있을 변화에 비해 별것 아닌 변화일 것이지만 지금의 나로서는 이 변화가 참 감사하다. 자바스크립트를 편하게 사용할 수 있게 되었고 하루종일 머리를 쥐어짜다가 보면 가끔씩 제법 우아한 코드를 작성할 수 있게 되었다. 파이썬, 엘릭서, 클로저를 공부했고 리액트 네이티브를 이용해 <a href="https://itunes.apple.com/kr/app/%EB%A7%88%ED%94%8C/id1196659118?mt=8" target="_blank" rel="external">앱</a>을 만들기도 했다. 친구들과 토이 프로젝트로 만든 <a href="https://itunes.apple.com/us/app/%EC%8B%9C%EC%9D%8C/id1209933766?mt=8" target="_blank" rel="external">앱</a>이 현재도 서비스되고 있으며, 서버와 클라이언트를 오가며 코드를 짤 수 있게 되었다. 무엇보다도 내가 속한 회사와 팀에 대한 확신이 생겼으며 특히 내가 공부하고 있는 언어와 분야가 잘 될 것이라는 기대가 커졌다. 팀장님이 집필한 책도 곧 나올 것이고 함수형 프로그래밍에 대한 관심도 커질 것 같다. 그때가 되면 당당하게 개발자로서 사람들 앞에 설 수 있는 개발자가 되기까지 더 열심히 머리를 쥐어짜야겠다.</p>
<p><strong>놀라운 점: 이 블로그의 전신인 RABBYLAB이 시작한 날은 2015년 7월 17일이었다.</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/view-of-value/1-year-anniversary/" data-id="cjajb82fu000lo0vg852ecq1d" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/view-of-value/1-year-anniversary/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aniversary/">aniversary</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/memoir/">memoir</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-make-bingo-game" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/make-bingo-game/" class="article-date">
  <time datetime="2017-07-12T14:56:13.000Z" itemprop="datePublished">2017-07-12</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/make-bingo-game/">[미니게임] 소개 - BINGO</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>미니 게임을 만들어보자!</em></p>
<h2 id="BINGO-1-Plan"><a href="#BINGO-1-Plan" class="headerlink" title="BINGO[1] - Plan"></a>BINGO[1] - Plan</h2><p><em>옆집 사는 개 이름 빙고라지요~ B.I.N.G.O. B.I.N.G.O. 빙고 개 이름</em><br>어린 시절 가족과 이웃 사촌들과 함께 여행을 가면 <a href="http://jr.naver.com/s/play_song/view?sort=update&amp;contentsNo=48312" target="_blank" rel="external">주제가</a>를 부르며 즐겨하던 빙고 게임을 만들어볼까 합니다.</p>
<h4 id="기본-룰"><a href="#기본-룰" class="headerlink" title="기본 룰"></a>기본 룰</h4><ul>
<li>1부터 75까지의 숫자가 임의로 배정된 보드에서 게임이 진행된다.<ul>
<li>각 숫자는 B, I, N, G, O 라고 이름 붙여진 행에 속하게 된다.</li>
<li>각 행은 15개 숫자 중 5개의 숫자를 임의로 부여 받는다. (임의 지정 범위 =&gt; B: 1~15, I: 16~30, N: 31~45, G: 46~60, O: 61~75 )</li>
</ul>
</li>
<li>참가자는 진행자에 의해(혹은 임의의 방식에 의해) 선택된 숫자를 보드에서 체크해나간다.</li>
<li>체크된 숫자가 가로, 세로, 대각선으로 한줄이 모두 체크가 되면 빙고다.</li>
<li>이때 사전에 정의된 빙고 갯수를 먼저 도달한 사람이 게임에서 승리한다.</li>
</ul>
<h4 id="결과물과-구현-방식"><a href="#결과물과-구현-방식" class="headerlink" title="결과물과 구현 방식"></a>결과물과 구현 방식</h4><p>우선 완성된 게임을 먼저 확인하겠습니다. 미리 만들어 둔 <a href="/bingo">게임</a>를 통해 확인하시면 됩니다.</p>
<p>구현에는 <a href="/tags/오늘의-함수/">오늘의 함수 시리즈</a>와 <a href="/source/daily.js">daily.js</a>의 모태가 되는 함수형 자바스크립트 라이브러리 <a href="https://github.com/marpple/partial.js" target="_blank" rel="external">partial.js</a>를 사용하겠습니다. DOM을 다루는 don.js도 사용합니다. (don.js는 함수형 프로그래밍에 최적화된 DOM 핸들링 라이브러리입니다.)</p>
<h5 id="다음-글을-통해-만들기-과정을-확인하실-수-있습니다"><a href="#다음-글을-통해-만들기-과정을-확인하실-수-있습니다" class="headerlink" title="다음 글을 통해 만들기 과정을 확인하실 수 있습니다."></a><a href="/programming/make-bingo-game-1/">다음 글</a>을 통해 만들기 과정을 확인하실 수 있습니다.</h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/make-bingo-game/" data-id="cjajb82ho002ho0vgks1f5o88" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/make-bingo-game/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bingo/">bingo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/만들기/">만들기</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/미니게임/">미니게임</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/빙고/">빙고</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javascript-daily-function-9" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/javascript-daily-function-9/" class="article-date">
  <time datetime="2017-06-12T11:59:55.000Z" itemprop="datePublished">2017-06-12</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/javascript-daily-function-9/">[오늘의 함수] omit</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>오늘 발견한 재미있는 함수를 소개합니다</em></p>
<h2 id="omit"><a href="#omit" class="headerlink" title="omit"></a>omit</h2><p>오늘은 <code>pick</code> 함수의 반대 버전인 <code>omit</code>을 소개해드릴까 합니다. 다시 말해 <code>omit</code>은 객체에서 키가 일치하는 프로퍼티를 제외한 새로운 객체를 반환하는 함수입니다. </p>
<p>사실 이 함수를 굳이 소개할 필요가 있을까 싶었는데, 사연이 생겨서 올리게 되었습니다. 2주 전쯤 <a href="https://www.codewars.com/kumite/" target="_blank" rel="external">Codewars</a>라는 사이트에서 제공하는 ‘kumite’(일본어로 대련을 의미합니다.) 페이지에 <code>pick</code> 함수를 올려두었습니다. 그리고 며칠 뒤 <code>omit</code>과 같은 일을 하는 <code>flick</code>함수를 대련 코드로 올리셨기에 살펴보다가 블로그에 소개하면 좋겠다고 생각해서 올리게 되었습니다.</p>
<p>우선 <a href="https://www.codewars.com/kumite/59421af0c32f438c1a000044?sel=595073a15ceb2bda6d000161" target="_blank" rel="external">Codewars</a>에 올려둔 코드 전체를 보여드리겠습니다.</p>
<h4 id="1-pick-함수와-flick-함수"><a href="#1-pick-함수와-flick-함수" class="headerlink" title="(1) pick 함수와 flick 함수"></a>(1) pick 함수와 flick 함수</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> _ = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// [1] 제가 작성한 pick 함수입니다. 기존의 pick과 크게 다르지 않습니다.</span></div><div class="line">_.pick = <span class="function">(<span class="params">target, ...keys</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> keys[<span class="number">0</span>] == <span class="string">'function'</span>) &#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> predicate = keys[<span class="number">0</span>];</div><div class="line">    keys = <span class="built_in">Object</span>.keys(target);</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> keys.reduce(<span class="function">(<span class="params">obj, key</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> predicate(target[key], key, target) ? (obj[key] = target[key], obj) : obj;</div><div class="line">    &#125;, &#123;&#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> keys.reduce(<span class="function">(<span class="params">obj, key</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> obj[key] = target[key], obj;</div><div class="line">  &#125;, &#123;&#125;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// [2] Robert.Cutright이라는 개발자가 작성한 flick 함수입니다. omit 함수와 같은 일을 합니다.</span></div><div class="line">_.flick = <span class="function">(<span class="params">target, ...keys</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> keys[<span class="number">0</span>] == <span class="string">'function'</span>) &#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> predicate = keys[<span class="number">0</span>];</div><div class="line">    keys = <span class="built_in">Object</span>.keys(target);</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> keys.reduce(<span class="function">(<span class="params">obj, key</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> predicate(target[key], key, target) ? obj : (obj[key] = target[key], obj);</div><div class="line">    &#125;, &#123;&#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> obj = <span class="built_in">Object</span>.assign(&#123;&#125;, target);</div><div class="line">  <span class="built_in">Object</span>.keys(obj).filter(<span class="function"><span class="params">key</span> =&gt;</span> keys.includes(key) ? <span class="keyword">delete</span> obj[key] : obj[key]);</div><div class="line">  <span class="keyword">return</span> obj;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Robert가 작성한 코드는 정상적으로 동작합니다. 하지만 저는 한가지가 아쉬웠습니다. 바로 <code>filter</code>를 사용한 부분입니다. <code>reduce</code>를 사용하면 새로운 객체 복사본을 만드는 <code>var obj = Object.assign({}, target);</code> 같은 코드를 작성하지 않아도 된다는 점을 놓친 것 같았습니다. 그리고 이렇게 새로운 객체를 생성해서 <code>delete obj[key]</code>로 데이터를 제거해나가는 코드는 불필요한 코드라는 생각이 들었습니다. 그래서 아래와 같이 변경했습니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">_.omit = <span class="function">(<span class="params">target, ...keys</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> keys[<span class="number">0</span>] == <span class="string">'function'</span>) &#123;</div><div class="line">	  <span class="keyword">var</span> predicate = keys[<span class="number">0</span>];</div><div class="line">    <span class="keyword">return</span> _.pick(target, (...args) =&gt; !predicate(...args)) <span class="comment">// [1] pick을 사용하고 predicate를 뒤집었습니다.</span></div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(target).reduce(<span class="function">(<span class="params">obj, key</span>) =&gt;</span> &#123; <span class="comment">// [2] reduce를 사용하면서 새로운 객체를 복사한 뒤 요소를 제거하지 않고 바로 생성합니다.</span></div><div class="line">    <span class="keyword">return</span> keys.includes(key) ? obj : (obj[key] = target[key], obj);</div><div class="line">  &#125;, &#123;&#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/javascript-daily-function-9/" data-id="cjajb82gu001io0vgpggld9jc" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/javascript-daily-function-9/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/오늘의-함수/">오늘의 함수</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-프로그래밍/">함수형 프로그래밍</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javascript-daily-function-8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/javascript-daily-function-8/" class="article-date">
  <time datetime="2017-04-26T13:54:34.000Z" itemprop="datePublished">2017-04-26</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/javascript-daily-function-8/">[오늘의 함수] partial2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>오늘 발견한 재미있는 함수를 소개합니다</em></p>
<h2 id="partial2-함수"><a href="#partial2-함수" class="headerlink" title="partial2 함수"></a>partial2 함수</h2><p>오늘은 지난 시간에 만든 <code>partial</code> 함수보다 향상된 버전의 함수를 준비해보았습니다. 지난 함수와 구분 짓기 위해 <code>partial2</code>라고 이름 붙였지만 하는 일은 같습니다. 인자가 미리 적용된 함수를 반환하는 함수입니다. 간단히 이전의 함수를 살펴보겠습니다.</p>
<h4 id="1-어제의-함수-partial"><a href="#1-어제의-함수-partial" class="headerlink" title="(1) 어제의 함수 - partial"></a>(1) 어제의 함수 - partial</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> _ = &#123;&#125;; <span class="comment">// [1] 건너뛰기의 단서가 될 키워드를 하나 만들어둡니다.</span></div><div class="line"><span class="keyword">var</span> partial = <span class="function"><span class="keyword">function</span>(<span class="params">func, ...args</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args2</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> args1 = args.slice(); <span class="comment">// [2] 생성된 클로저의 값이 변경되는 것을 막기 위해 배열을 복제합니다.</span></div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> args1) &#123; </div><div class="line">      <span class="keyword">if</span> (args1[i] === _) &#123; <span class="comment">// [3] 단서인 키워드와 일치하는 값이면 </span></div><div class="line">        args1[i] = args2.shift(); <span class="comment">// [4] 그 자리에 추가될 인자 값을 넣어줍니다.</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> func(...[...args1, ...args2]);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> a + b + c;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum10 = partial(sum, <span class="number">10</span>);</div><div class="line"><span class="keyword">var</span> sum20 = partial(sum, _, <span class="number">20</span>);</div><div class="line">sum10(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 13</span></div><div class="line">sum20(<span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 120</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> log = partial(<span class="built_in">console</span>.log, <span class="number">0</span>, _, <span class="number">0</span>, <span class="number">0</span>, _, <span class="number">0</span>);</div><div class="line">log(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// 0 1 0 0 2 0 3</span></div></pre></td></tr></table></figure>
<p>이번에 기존 <code>partial</code> 함수에 아쉬운 점은 ‘유연함’입니다. 인자를 조금 더 유연하게 받을 수 있다면 좋지 않을까요? 건너뛰기를 위한 단서인 <code>_</code>는 한번에 한 칸만 건너뜁니다. 몇번을 건너뛸지 알 수 없을 때 두번째로 들어오는 인자에 따라 유연하게 건너뛸 수 있다면 조금 더 편할 것 같습니다. 바로 오늘의 주인공인 <code>partial2</code>입니다.</p>
<h4 id="2-오늘의-함수-partial2"><a href="#2-오늘의-함수-partial2" class="headerlink" title="(2) 오늘의 함수 - partial2"></a>(2) 오늘의 함수 - partial2</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> partial2 = <span class="function"><span class="keyword">function</span>(<span class="params">func, ...parts</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> parts1 = [], parts2 = [], ___idx = parts.length;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> parts) &#123;</div><div class="line">    <span class="keyword">if</span> (parts[i] == ___) &#123;</div><div class="line">      ___idx = i; </div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (i &lt; ___idx) &#123;</div><div class="line">      parts1.push(parts[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      parts2.push(parts[i]);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> args1 = parts1.slice(), </div><div class="line">        args2 = parts2.slice(),</div><div class="line">        rest = args.slice();</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> args1) &#123;</div><div class="line">      <span class="keyword">if</span> (args1[i] == _) &#123;</div><div class="line">        args1[i] = rest.shift(); </div><div class="line">      &#125;</div><div class="line">    &#125;     </div><div class="line">      </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> args2) &#123;</div><div class="line">      <span class="keyword">if</span> (args2[i] == _) &#123;</div><div class="line">        args2[i] = rest.pop();</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> func(...[...args1, ...rest, ...args2]);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> log = partial2(<span class="built_in">console</span>.log, <span class="number">0</span>, _, <span class="number">0</span>, ___, <span class="number">0</span>, _, <span class="number">0</span>);</div><div class="line">log(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>); <span class="comment">// 0 1 0 2 3 4 5 6 7 8 9 0 10 0</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> greeting = partial2(<span class="built_in">console</span>.log, <span class="string">'Hello,'</span>, _, ___, <span class="string">'Nice to meet you.'</span>);</div><div class="line">greeting(<span class="string">'Joeun.'</span>, <span class="string">'My name is'</span>, <span class="string">'Momo.'</span>, <span class="string">'\n'</span>, <span class="string">'I\'m'</span>, <span class="number">27</span>, <span class="string">'years old.\n'</span>); </div><div class="line"><span class="comment">/* </span></div><div class="line">Hello, Joeun. </div><div class="line"> My name is Momo. </div><div class="line"> I'm 27 years old. </div><div class="line"> Nice to meet you.  </div><div class="line">*/</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/javascript-daily-function-8/" data-id="cjajb82gp001bo0vglre19wkm" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/javascript-daily-function-8/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/오늘의-함수/">오늘의 함수</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-프로그래밍/">함수형 프로그래밍</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javascript-daily-function-7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
      <a href="/programming/javascript-daily-function-7/" class="article-date">
  <time datetime="2017-04-19T14:41:48.000Z" itemprop="datePublished">2017-04-19</time>
</a>
    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/programming/">programming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/programming/javascript-daily-function-7/">[오늘의 함수] partial</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>오늘 발견한 재미있는 함수를 소개합니다</em></p>
<h2 id="partial-함수"><a href="#partial-함수" class="headerlink" title="partial 함수"></a>partial 함수</h2><p>함수를 만들면서 프로그래밍을 하다보면 <code>pipe</code>와 같이 새로운 함수를 만들어주는 함수가 필요한 경우가 있습니다. 오늘 소개해드릴 <code>partial</code>도 그런 유형의 함수입니다. 사실 ‘새로운 함수’를 만들어준다고 보기에는 어려움이 있을 것 같습니다. 이 함수는 <strong>기존의 함수에 인자를 미리 적용해두는 일을 하는 함수</strong>입니다. 내장함수 중에서 <code>bind</code>와 같은 일을 합니다. </p>
<h4 id="1-어제의-함수-인자를-미리-적용해두기"><a href="#1-어제의-함수-인자를-미리-적용해두기" class="headerlink" title="(1) 어제의 함수 - 인자를 미리 적용해두기"></a>(1) 어제의 함수 - 인자를 미리 적용해두기</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> a + b + c;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum10 = sum.bind(<span class="literal">null</span>, <span class="number">10</span>); <span class="comment">// [1] 첫번째 인자로 넘긴 null은 this 값 입니다.</span></div><div class="line"><span class="keyword">var</span> sum20 = sum.bind(<span class="literal">null</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">sum10(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 13</span></div><div class="line">sum20(<span class="number">50</span>); <span class="comment">// 70</span></div></pre></td></tr></table></figure>
<p>내장 함수를 사용하는 것도 나쁘지 않아보입니다. 하지만 이 함수에는 아쉬운 점이 있습니다. 반드시 순서대로 인자를 적용해야한다는 점입니다. 중간 인자를 건너뛰고 마지막 인자만 미리 적용해두고 싶을 땐 사용할 수 없다는 점이 아쉽습니다. 그래서 필요한 함수가 <code>partial</code>입니다. 우리가 원하는 ‘건너뛰고 적용하기’까지를 구현하기 위해선 평소보다 긴 함수를 정의해야 합니다. 고로 단계별로 함수를 발전시켜 보겠습니다.</p>
<h4 id="2-오늘의-함수-1단계-bind와-같은-수준의-partial"><a href="#2-오늘의-함수-1단계-bind와-같은-수준의-partial" class="headerlink" title="(2) 오늘의 함수 - 1단계: bind와 같은 수준의 partial"></a>(2) 오늘의 함수 - 1단계: bind와 같은 수준의 partial</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> partial = <span class="function"><span class="keyword">function</span>(<span class="params">func, ...args1</span>) </span>&#123; <span class="comment">// [1] 인자를 적용해둘 대상이 되는 함수 func를 받고 적용될 인자 rest 파라미터를 이용해 배열로 받습니다. (args1 = 미리 적용된 인자)</span></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args2</span>) </span>&#123; <span class="comment">// [2] 인자가 적용된 상태로 추가적인 인자를 받을 준비가 된 함수를 반환합니다. (args2 = 추가될 인자)</span></div><div class="line">    <span class="keyword">return</span> func(...[...args1, ...args2]); <span class="comment">// [3] 배열로 받은 인자들을 전개해서 함수에 값으로 전달하여 실행합니다. or 'return func.apply([...args1, ...args2])'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum10 = partial(sum, <span class="number">10</span>);</div><div class="line"><span class="keyword">var</span> sum20 = partial(sum, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">sum10(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 13</span></div><div class="line">sum20(<span class="number">50</span>); <span class="comment">// 70</span></div></pre></td></tr></table></figure>
<p>ES6에 새롭게 추가된 기능인 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank" rel="external">Spread 연산자</a>를 사용했습니다. 덕분에 코드가 간결해졌습니다. 결과적으로 <code>bind</code>와 같은 역할을 하는 함수가 만들어졌습니다. 현재 상황에서는 여전히 인자를 순서대로 적용해야만합니다. 다음 단계에서 건너뛰기가 가능하도록 만들어보겠습니다.</p>
<h4 id="3-오늘의-함수-2단계-건너뛰기가-가능한-partial"><a href="#3-오늘의-함수-2단계-건너뛰기가-가능한-partial" class="headerlink" title="(3) 오늘의 함수 - 2단계: 건너뛰기가 가능한 partial"></a>(3) 오늘의 함수 - 2단계: 건너뛰기가 가능한 partial</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> _ = &#123;&#125;; <span class="comment">// [1] 건너뛰기의 단서가 될 키워드를 하나 만들어둡니다.</span></div><div class="line"><span class="keyword">var</span> partial = <span class="function"><span class="keyword">function</span>(<span class="params">func, ...args</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args2</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> args1 = args.slice(); <span class="comment">// [2] 생성된 클로저의 값이 변경되는 것을 막기 위해 배열을 복제합니다.</span></div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> args1) &#123; </div><div class="line">      <span class="keyword">if</span> (args1[i] === _) &#123; <span class="comment">// [3] 단서인 키워드와 일치하는 값이면 </span></div><div class="line">        args1[i] = args2.shift(); <span class="comment">// [4] 그 자리에 추가될 인자 값을 넣어줍니다.</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> func(...[...args1, ...args2]);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum10 = partial(sum, <span class="number">10</span>);</div><div class="line"><span class="keyword">var</span> sum20 = partial(sum, _, <span class="number">20</span>);</div><div class="line">sum10(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 13</span></div><div class="line">sum20(<span class="number">50</span>, <span class="number">50</span>); <span class="comment">// 120</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> test = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c, d</span>) </span>&#123; <span class="comment">// [5] 네개의 인자를 받아 출력하는 테스트 함수입니다.</span></div><div class="line">  <span class="built_in">console</span>.log(a, b, c, d);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> skip = partial(test, <span class="number">1</span>, _, <span class="number">3</span>); <span class="comment">// [6] 건너뛰기 키워드를 사용해서 인자 b와 d의 값을 지정하지 않은 채로 skip 함수를 생성합니다.</span></div><div class="line">skip(<span class="number">20</span>, <span class="number">40</span>); <span class="comment">// [7] 인자 b와 d에 값이 적용됩니다. 결과 값은 1, 20, 3, 40</span></div></pre></td></tr></table></figure>
<p>(건너뛰기라는 표현이 와닿지 않을 수도 있을 것 같아 부연설명합니다. 미리 적용될 인자를 나중에 적용하도록 유보시킨다는 관점에서는 ‘건너뛰기’라고 말할 수 있지만 다음에 들어올 인자의 자리를 비워둔다는 관점으로는 ‘비워두기’가 더 적절한 표현일 것 같습니다. 비워둔 자리에 두번째로 들어오는 인자 값이 적용된다고 이해하시면 좋을 것 같습니다.)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://joeun.me/programming/javascript-daily-function-7/" data-id="cjajb82gr001eo0vgyi4qx51o" class="article-share-link">Share</a>
      
        <a href="https://joeun.me/programming/javascript-daily-function-7/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/오늘의-함수/">오늘의 함수</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/함수형-프로그래밍/">함수형 프로그래밍</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">&raquo;</a>
  </nav>
</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Joeun Ha
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/about" class="mobile-nav-link">소개</a>
  
    <a href="/" class="mobile-nav-link">블로그</a>
  
    <a href="/archives" class="mobile-nav-link">모아보기</a>
  
    <a href="https://github.com/joeunha" class="mobile-nav-link">Github</a>
  
</nav>
    
<script>
  var disqus_shortname = 'joeun';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>